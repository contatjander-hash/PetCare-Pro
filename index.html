<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <title>PetCare - Acompanhamento do seu Pet</title>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700&family=DM+Serif+Display&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-primary: #fef8f3;
            --bg-secondary: #ffffff;
            --bg-accent: #fff5ed;
            --text-primary: #1a1a1a;
            --text-secondary: #666666;
            --text-tertiary: #999999;
            --accent: #ff6b35;
            --accent-light: #ff8c61;
            --accent-dark: #e55a2b;
            --purple: #8b5cf6;
            --purple-light: #a78bfa;
            --blue: #3b82f6;
            --green: #10b981;
            --yellow: #fbbf24;
            --pink: #ec4899;
            --border: #ffe4d6;
            --success: #22c55e;
            --warning: #f59e0b;
            --danger: #ef4444;
            --shadow: rgba(255, 107, 53, 0.1);
            --shadow-md: rgba(255, 107, 53, 0.2);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Outfit', sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            line-height: 1.6;
            overflow-x: hidden;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 2rem;
        }

        /* Header */
        header {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.98) 0%, rgba(255, 245, 237, 0.98) 100%);
            border-bottom: 2px solid var(--border);
            position: sticky;
            top: 0;
            z-index: 100;
            backdrop-filter: blur(10px);
        }

        nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1.5rem 2rem;
            max-width: 1400px;
            margin: 0 auto;
        }

        .logo {
            font-family: 'DM Serif Display', serif;
            font-size: 1.75rem;
            font-weight: 400;
            letter-spacing: -0.02em;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            background: linear-gradient(135deg, var(--accent) 0%, var(--purple) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .logo::before {
            content: 'üêæ';
            font-size: 1.5rem;
            animation: bounce 2s ease-in-out infinite;
            -webkit-text-fill-color: initial;
        }

        .nav-links {
            display: flex;
            gap: 2rem;
            list-style: none;
        }

        .nav-links a {
            text-decoration: none;
            color: var(--text-secondary);
            font-weight: 500;
            font-size: 0.95rem;
            transition: color 0.2s;
            position: relative;
        }

        .nav-links a:hover {
            color: var(--text-primary);
        }

        .nav-links a.active::after {
            content: '';
            position: absolute;
            bottom: -0.5rem;
            left: 0;
            right: 0;
            height: 2px;
            background: var(--accent);
            animation: slideIn 0.3s ease-out;
        }

        /* Video Hero Section */
        .video-hero {
            position: relative;
            height: 70vh;
            min-height: 500px;
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%);
        }

        .video-background {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            background: linear-gradient(-45deg, #667eea, #764ba2, #f093fb, #4facfe);
            background-size: 400% 400%;
            animation: gradientShift 15s ease infinite;
        }

        .video-background::before,
        .video-background::after {
            content: '';
            position: absolute;
            width: 300px;
            height: 300px;
            border-radius: 50%;
            filter: blur(80px);
            opacity: 0.5;
            animation: float 8s ease-in-out infinite;
        }

        .video-background::before {
            background: rgba(255, 107, 53, 0.6);
            top: 20%;
            left: 10%;
            animation-delay: 0s;
        }

        .video-background::after {
            background: rgba(236, 72, 153, 0.6);
            bottom: 20%;
            right: 10%;
            animation-delay: 2s;
        }

        .floating-paws {
            position: absolute;
            width: 100%;
            height: 100%;
            overflow: hidden;
        }

        .paw {
            position: absolute;
            font-size: 2rem;
            opacity: 0.2;
            animation: floatPaw 20s linear infinite;
        }

        .paw:nth-child(1) { left: 10%; animation-duration: 15s; animation-delay: 0s; }
        .paw:nth-child(2) { left: 30%; animation-duration: 18s; animation-delay: 2s; }
        .paw:nth-child(3) { left: 50%; animation-duration: 22s; animation-delay: 4s; }
        .paw:nth-child(4) { left: 70%; animation-duration: 16s; animation-delay: 6s; }
        .paw:nth-child(5) { left: 90%; animation-duration: 20s; animation-delay: 8s; }

        @keyframes gradientShift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        @keyframes floatPaw {
            0% {
                transform: translateY(100vh) rotate(0deg);
                opacity: 0;
            }
            10% {
                opacity: 0.3;
            }
            90% {
                opacity: 0.3;
            }
            100% {
                transform: translateY(-100px) rotate(360deg);
                opacity: 0;
            }
        }

        .video-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.7) 0%, rgba(118, 75, 162, 0.7) 50%, rgba(240, 147, 251, 0.7) 100%);
            z-index: 1;
            mix-blend-mode: multiply;
        }

        .video-content {
            position: relative;
            z-index: 2;
            text-align: center;
            color: white;
            padding: 2rem;
            animation: fadeInUp 1s ease-out;
        }

        .video-content h1 {
            font-family: 'DM Serif Display', serif;
            font-size: 4rem;
            font-weight: 400;
            margin-bottom: 1.5rem;
            line-height: 1.2;
            text-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
            animation: fadeInUp 1s ease-out 0.2s backwards;
        }

        .video-content p {
            font-size: 1.5rem;
            margin-bottom: 2.5rem;
            opacity: 0.95;
            font-weight: 300;
            max-width: 700px;
            margin-left: auto;
            margin-right: auto;
            text-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
            animation: fadeInUp 1s ease-out 0.4s backwards;
        }

        .cta-button {
            background: white;
            color: var(--purple);
            padding: 1rem 3rem;
            border-radius: 50px;
            font-size: 1.1rem;
            font-weight: 600;
            border: none;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            animation: fadeInUp 1s ease-out 0.6s backwards;
            -webkit-tap-highlight-color: transparent;
            touch-action: manipulation;
            user-select: none;
        }

        .cta-button:hover {
            transform: translateY(-3px) scale(1.05);
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.4);
        }

        /* Hero Section */
        .hero {
            padding: 4rem 0 3rem;
            animation: fadeInUp 0.8s ease-out;
        }

        /* Inspirational Photos Section */
        .inspiration-section {
            padding: 4rem 0;
            background: linear-gradient(180deg, var(--bg-primary) 0%, var(--bg-secondary) 100%);
        }

        /* Pricing Section */
        .pricing-section {
            padding: 5rem 0;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            position: relative;
            overflow: hidden;
        }

        .pricing-content {
            position: relative;
            z-index: 2;
        }

        .pricing-header {
            text-align: center;
            color: white;
            margin-bottom: 3rem;
        }

        .pricing-header h2 {
            font-family: 'DM Serif Display', serif;
            font-size: 3rem;
            margin-bottom: 1rem;
            animation: fadeInUp 0.8s ease-out;
        }

        .pricing-header p {
            font-size: 1.2rem;
            opacity: 0.95;
            animation: fadeInUp 0.8s ease-out 0.2s backwards;
        }

        .pricing-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 2rem;
            max-width: 900px;
            margin: 0 auto;
        }

        .pricing-card {
            background: white;
            border-radius: 24px;
            padding: 2.5rem;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            transition: all 0.4s ease;
            animation: fadeInScale 0.8s ease-out backwards;
            position: relative;
            overflow: hidden;
        }

        .pricing-card:nth-child(1) { animation-delay: 0.3s; }
        .pricing-card:nth-child(2) { 
            animation-delay: 0.4s;
            border: 3px solid var(--yellow);
        }

        .pricing-card:hover {
            transform: translateY(-10px) scale(1.02);
            box-shadow: 0 25px 70px rgba(0, 0, 0, 0.4);
        }

        .popular-badge {
            position: absolute;
            top: 20px;
            right: -35px;
            background: var(--yellow);
            color: #1a1a1a;
            padding: 0.5rem 3rem;
            transform: rotate(45deg);
            font-weight: 700;
            font-size: 0.85rem;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
        }

        .plan-name {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 1rem;
            text-align: center;
        }

        .plan-price {
            text-align: center;
            margin-bottom: 2rem;
        }

        .price-value {
            font-family: 'DM Serif Display', serif;
            font-size: 3.5rem;
            color: var(--accent);
            font-weight: 400;
            line-height: 1;
        }

        .price-currency {
            font-size: 1.5rem;
            vertical-align: super;
        }

        .price-period {
            display: block;
            color: var(--text-secondary);
            font-size: 1rem;
            margin-top: 0.5rem;
        }

        .plan-features {
            list-style: none;
            margin-bottom: 2rem;
        }

        .plan-features li {
            padding: 0.75rem 0;
            color: var(--text-primary);
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .plan-features li::before {
            content: '‚úì';
            width: 24px;
            height: 24px;
            background: linear-gradient(135deg, var(--green) 0%, #34d399 100%);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            flex-shrink: 0;
        }

        .plan-cta {
            width: 100%;
            padding: 1rem;
            background: linear-gradient(135deg, var(--accent) 0%, var(--pink) 100%);
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 1.1rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s;
            font-family: 'Outfit', sans-serif;
            -webkit-tap-highlight-color: transparent;
            touch-action: manipulation;
            user-select: none;
        }

        .plan-cta:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(255, 107, 53, 0.4);
        }

        .pix-note {
            margin-top: 1.5rem;
            padding: 1rem;
            background: #fff5ed;
            border-radius: 12px;
            border-left: 4px solid var(--accent);
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        .pix-note strong {
            color: var(--accent);
            display: block;
            margin-bottom: 0.25rem;
        }

        /* Animated Pet Carousel */
        .pet-carousel {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 200px;
            overflow: hidden;
            pointer-events: none;
            z-index: 1;
        }

        .carousel-track {
            display: flex;
            gap: 2rem;
            animation: scroll 20s linear infinite;
            width: max-content;
        }

        .carousel-item {
            width: 180px;
            height: 180px;
            border-radius: 20px;
            overflow: hidden;
            flex-shrink: 0;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            animation: jump 2s ease-in-out infinite;
        }

        .carousel-item:nth-child(1) { animation-delay: 0s; }
        .carousel-item:nth-child(2) { animation-delay: 0.3s; }
        .carousel-item:nth-child(3) { animation-delay: 0.6s; }
        .carousel-item:nth-child(4) { animation-delay: 0.9s; }
        .carousel-item:nth-child(5) { animation-delay: 1.2s; }

        .carousel-item img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        @keyframes scroll {
            0% {
                transform: translateX(0);
            }
            100% {
                transform: translateX(calc(-180px * 5 - 10rem));
            }
        }

        @keyframes jump {
            0%, 100% {
                transform: translateY(0);
            }
            50% {
                transform: translateY(-20px);
            }
        }

        .section-title {
            text-align: center;
            margin-bottom: 3rem;
        }

        .section-title h2 {
            font-family: 'DM Serif Display', serif;
            font-size: 2.5rem;
            margin-bottom: 1rem;
            background: linear-gradient(135deg, var(--accent) 0%, var(--purple) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .section-title p {
            color: var(--text-secondary);
            font-size: 1.1rem;
        }

        .photo-gallery-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 2rem;
            margin-top: 2rem;
        }

        .inspiration-photo {
            position: relative;
            border-radius: 20px;
            overflow: hidden;
            aspect-ratio: 4/5;
            box-shadow: 0 8px 24px var(--shadow);
            transition: all 0.4s ease;
            animation: fadeInScale 0.8s ease-out backwards;
        }

        .inspiration-photo:nth-child(1) { animation-delay: 0.1s; }
        .inspiration-photo:nth-child(2) { animation-delay: 0.2s; }
        .inspiration-photo:nth-child(3) { animation-delay: 0.3s; }
        .inspiration-photo:nth-child(4) { 
            animation-delay: 0.4s;
            display: none;
        }

        .inspiration-photo img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.4s ease;
            display: block;
        }

        .inspiration-photo:hover {
            transform: translateY(-10px) scale(1.02);
            box-shadow: 0 12px 40px var(--shadow-md);
        }

        .inspiration-photo:hover img {
            transform: scale(1.1);
        }

        .photo-caption {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            padding: 1.5rem;
            background: linear-gradient(to top, rgba(0,0,0,0.8) 0%, transparent 100%);
            color: white;
            transform: translateY(100%);
            transition: transform 0.4s ease;
        }

        .inspiration-photo:hover .photo-caption {
            transform: translateY(0);
        }

        .photo-caption h3 {
            font-size: 1.1rem;
            margin-bottom: 0.25rem;
            font-weight: 600;
        }

        .photo-caption p {
            font-size: 0.9rem;
            opacity: 0.9;
        }

        /* Hero Section */

        .hero-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 4rem;
            align-items: center;
        }

        .hero-text h1 {
            font-family: 'DM Serif Display', serif;
            font-size: 3.5rem;
            font-weight: 400;
            line-height: 1.1;
            margin-bottom: 1.5rem;
            letter-spacing: -0.03em;
        }

        .hero-text p {
            font-size: 1.1rem;
            color: var(--text-secondary);
            margin-bottom: 2rem;
            font-weight: 300;
        }

        .pet-profile-card {
            background: linear-gradient(135deg, var(--bg-secondary) 0%, var(--bg-accent) 100%);
            border-radius: 24px;
            padding: 2rem;
            border: 1px solid var(--border);
            box-shadow: 0 8px 32px var(--shadow);
            animation: fadeInScale 0.8s ease-out 0.2s backwards;
        }

        .pet-avatar {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--accent) 0%, var(--pink) 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 4rem;
            margin: 0 auto 1.5rem;
            box-shadow: 0 8px 24px var(--shadow-md);
            animation: float 3s ease-in-out infinite;
            position: relative;
        }

        .pet-avatar::after {
            content: '';
            position: absolute;
            inset: -3px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--yellow), var(--purple), var(--blue));
            z-index: -1;
            opacity: 0;
            transition: opacity 0.3s;
        }

        .pet-avatar:hover::after {
            opacity: 1;
            animation: rotate 3s linear infinite;
        }

        .pet-info h2 {
            text-align: center;
            font-size: 1.75rem;
            margin-bottom: 0.5rem;
        }

        .pet-info p {
            text-align: center;
            color: var(--text-secondary);
            font-size: 0.95rem;
        }

        /* Dashboard Grid */
        .dashboard {
            padding: 3rem 0;
        }

        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 2rem;
            margin-top: 2rem;
        }

        .card {
            background: var(--bg-secondary);
            border-radius: 20px;
            padding: 2rem;
            border: 2px solid var(--border);
            box-shadow: 0 4px 16px var(--shadow);
            transition: all 0.3s ease;
            animation: fadeInUp 0.6s ease-out backwards;
            position: relative;
            overflow: hidden;
        }

        .card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, var(--accent), var(--purple), var(--blue));
            opacity: 0;
            transition: opacity 0.3s;
        }

        .card:hover::before {
            opacity: 1;
        }

        .card:nth-child(1) { animation-delay: 0.1s; }
        .card:nth-child(1)::before { background: linear-gradient(90deg, var(--accent), var(--pink)); }
        
        .card:nth-child(2) { animation-delay: 0.2s; }
        .card:nth-child(2)::before { background: linear-gradient(90deg, var(--purple), var(--blue)); }
        
        .card:nth-child(3) { animation-delay: 0.3s; }
        .card:nth-child(3)::before { background: linear-gradient(90deg, var(--green), var(--blue)); }
        
        .card:nth-child(4) { animation-delay: 0.4s; }
        .card:nth-child(4)::before { background: linear-gradient(90deg, var(--yellow), var(--accent)); }

        .card:hover {
            transform: translateY(-8px);
            box-shadow: 0 12px 32px var(--shadow-md);
            border-color: var(--accent);
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
        }

        .card-title {
            font-size: 1.25rem;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .card-icon {
            font-size: 1.5rem;
            filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.1));
            animation: bounce 2s ease-in-out infinite;
        }

        .card:nth-child(1) .card-icon {
            animation-delay: 0.5s;
        }
        .card:nth-child(2) .card-icon {
            animation-delay: 0.7s;
        }
        .card:nth-child(3) .card-icon {
            animation-delay: 0.9s;
        }
        .card:nth-child(4) .card-icon {
            animation-delay: 1.1s;
        }

        .btn {
            background: linear-gradient(135deg, var(--accent) 0%, var(--accent-dark) 100%);
            color: white;
            border: none;
            padding: 0.75rem 1.5rem;
            border-radius: 12px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 0.95rem;
            font-family: 'Outfit', sans-serif;
            box-shadow: 0 4px 12px rgba(255, 107, 53, 0.3);
            position: relative;
            overflow: hidden;
            -webkit-tap-highlight-color: transparent;
            touch-action: manipulation;
            user-select: none;
            -webkit-user-select: none;
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            transition: left 0.5s;
        }

        .btn:hover::before {
            left: 100%;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(255, 107, 53, 0.4);
        }

        .btn:active {
            transform: translateY(0);
        }

        .btn-secondary {
            background: transparent;
            color: var(--accent);
            border: 1px solid var(--border);
            padding: 0.5rem 1rem;
            font-size: 0.85rem;
            -webkit-tap-highlight-color: transparent;
            touch-action: manipulation;
            user-select: none;
        }

        .btn-secondary:hover {
            background: var(--bg-accent);
        }

        /* Lists */
        .item-list {
            list-style: none;
        }

        .item {
            padding: 1rem;
            border-bottom: 1px solid var(--border);
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: background 0.2s;
        }

        .item:last-child {
            border-bottom: none;
        }

        .item:hover {
            background: var(--bg-accent);
        }

        .item-info h4 {
            font-size: 1rem;
            margin-bottom: 0.25rem;
            font-weight: 500;
        }

        .item-info p {
            font-size: 0.85rem;
            color: var(--text-secondary);
        }

        .item-status {
            padding: 0.35rem 0.75rem;
            border-radius: 8px;
            font-size: 0.8rem;
            font-weight: 500;
        }

        .status-upcoming {
            background: #fef3c7;
            color: #92400e;
        }

        .status-done {
            background: #dcfce7;
            color: #166534;
        }

        .status-overdue {
            background: #fee2e2;
            color: #991b1b;
        }

        /* Weight Chart */
        .weight-chart {
            margin-top: 1.5rem;
            padding: 1.5rem;
            background: var(--bg-accent);
            border-radius: 12px;
        }

        .chart-bars {
            display: flex;
            align-items: flex-end;
            gap: 0.5rem;
            height: 120px;
            margin-top: 1rem;
        }

        .bar {
            flex: 1;
            background: linear-gradient(to top, var(--accent) 0%, var(--accent-light) 50%, var(--yellow) 100%);
            border-radius: 8px 8px 0 0;
            position: relative;
            transition: all 0.3s;
            animation: growUp 0.8s ease-out backwards;
            box-shadow: 0 -2px 10px rgba(255, 107, 53, 0.3);
        }

        .bar:nth-child(1) { 
            animation-delay: 0.1s;
            background: linear-gradient(to top, #f59e0b 0%, #fbbf24 100%);
        }
        .bar:nth-child(2) { 
            animation-delay: 0.2s;
            background: linear-gradient(to top, var(--accent) 0%, var(--pink) 100%);
        }
        .bar:nth-child(3) { 
            animation-delay: 0.3s;
            background: linear-gradient(to top, var(--purple) 0%, var(--purple-light) 100%);
        }
        .bar:nth-child(4) { 
            animation-delay: 0.4s;
            background: linear-gradient(to top, var(--blue) 0%, #60a5fa 100%);
        }
        .bar:nth-child(5) { 
            animation-delay: 0.5s;
            background: linear-gradient(to top, var(--green) 0%, #34d399 100%);
        }
        .bar:nth-child(6) { 
            animation-delay: 0.6s;
            background: linear-gradient(to top, var(--pink) 0%, #f472b6 100%);
        }

        .bar:hover {
            opacity: 0.8;
            transform: scaleY(1.08);
            filter: brightness(1.1);
        }

        .bar-label {
            position: absolute;
            bottom: -1.5rem;
            left: 50%;
            transform: translateX(-50%);
            font-size: 0.7rem;
            color: var(--text-tertiary);
            white-space: nowrap;
        }

        /* Photo Gallery */
        .photo-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 0.75rem;
            margin-top: 1rem;
        }

        .photo-placeholder {
            aspect-ratio: 1;
            background: linear-gradient(135deg, var(--bg-accent) 0%, var(--border) 100%);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            cursor: pointer;
            transition: all 0.3s;
            animation: fadeInScale 0.6s ease-out backwards;
            border: 2px dashed var(--border);
        }

        .photo-placeholder:nth-child(1) { 
            animation-delay: 0.1s;
            background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
        }
        .photo-placeholder:nth-child(2) { 
            animation-delay: 0.2s;
            background: linear-gradient(135deg, #ddd6fe 0%, #c4b5fd 100%);
        }
        .photo-placeholder:nth-child(3) { 
            animation-delay: 0.3s;
            background: linear-gradient(135deg, #fed7aa 0%, #fdba74 100%);
        }

        .photo-placeholder:hover {
            transform: scale(1.05) rotate(2deg);
            box-shadow: 0 8px 20px var(--shadow-md);
        }

        .photo-upload {
            background: linear-gradient(135deg, var(--accent) 0%, var(--pink) 100%);
            color: white;
            font-size: 3rem;
            font-weight: 300;
            border: 2px solid var(--accent);
        }

        .photo-upload:hover {
            transform: scale(1.1) rotate(-2deg);
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(4px);
            z-index: 1000;
            align-items: center;
            justify-content: center;
            animation: fadeIn 0.3s ease-out;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: var(--bg-secondary);
            border-radius: 24px;
            padding: 2.5rem;
            max-width: 600px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            animation: scaleIn 0.3s ease-out;
        }

        .pet-photo-selector {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1rem;
            margin: 1.5rem 0;
        }

        .pet-photo-option {
            position: relative;
            aspect-ratio: 1;
            border-radius: 16px;
            overflow: hidden;
            cursor: pointer;
            border: 3px solid transparent;
            transition: all 0.3s ease;
            box-shadow: 0 4px 12px var(--shadow);
        }

        .pet-photo-option img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .pet-photo-option:hover {
            transform: scale(1.05);
            box-shadow: 0 6px 20px var(--shadow-md);
        }

        .pet-photo-option.selected {
            border-color: var(--accent);
            transform: scale(1.05);
            box-shadow: 0 0 0 4px rgba(255, 107, 53, 0.2);
        }

        .pet-photo-option::after {
            content: '‚úì';
            position: absolute;
            top: 0.5rem;
            right: 0.5rem;
            width: 28px;
            height: 28px;
            background: var(--accent);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            opacity: 0;
            transform: scale(0);
            transition: all 0.3s ease;
        }

        .pet-photo-option.selected::after {
            opacity: 1;
            transform: scale(1);
        }

        .photo-label {
            margin-bottom: 0.5rem;
            font-weight: 600;
            color: var(--text-primary);
            display: block;
        }

        /* PIX Payment Modal */
        .pix-payment-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(8px);
            z-index: 2000;
            align-items: center;
            justify-content: center;
            animation: fadeIn 0.3s ease-out;
        }

        .pix-payment-modal.active {
            display: flex;
        }

        .pix-modal-content {
            background: var(--bg-secondary);
            border-radius: 24px;
            padding: 2rem 2.5rem 2.5rem 2.5rem;
            max-width: 500px;
            width: 90%;
            max-height: 85vh;
            overflow-y: auto;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
            animation: scaleIn 0.3s ease-out;
            text-align: center;
            position: relative;
        }

        /* Custom scrollbar for PIX modal */
        .pix-modal-content::-webkit-scrollbar {
            width: 8px;
        }

        .pix-modal-content::-webkit-scrollbar-track {
            background: var(--bg-accent);
            border-radius: 10px;
        }

        .pix-modal-content::-webkit-scrollbar-thumb {
            background: var(--accent);
            border-radius: 10px;
        }

        .pix-modal-content::-webkit-scrollbar-thumb:hover {
            background: var(--accent-dark);
        }

        .pix-modal-header {
            margin-bottom: 1.5rem;
            position: relative;
        }

        .pix-modal-header h3 {
            font-size: 1.75rem;
            margin-bottom: 0.5rem;
            color: var(--text-primary);
            padding-right: 2rem;
        }

        .pix-modal-header .close-btn {
            position: absolute;
            top: -0.5rem;
            right: -0.5rem;
        }

        .pix-plan-info {
            background: var(--bg-accent);
            padding: 1rem;
            border-radius: 12px;
            margin-bottom: 2rem;
        }

        .pix-plan-info .plan-selected {
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 0.5rem;
        }

        .pix-plan-info .amount {
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--accent);
            font-family: 'DM Serif Display', serif;
        }

        .qr-code-container {
            background: white;
            padding: 1.5rem;
            border-radius: 16px;
            margin-bottom: 1.5rem;
            box-shadow: 0 4px 12px var(--shadow);
        }

        .qr-code-container img {
            width: 200px;
            height: 200px;
            margin: 0 auto;
            display: block;
        }

        .qr-placeholder {
            width: 200px;
            height: 200px;
            margin: 0 auto;
            background: linear-gradient(135deg, #f0f0f0 0%, #e0e0e0 100%);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
            gap: 0.75rem;
        }

        .qr-placeholder-icon {
            font-size: 3rem;
        }

        .qr-placeholder-text {
            color: var(--text-secondary);
            font-size: 0.85rem;
            text-align: center;
            padding: 0 1rem;
        }

        .pix-copy-section {
            margin-bottom: 1.5rem;
        }

        .pix-copy-label {
            font-weight: 600;
            margin-bottom: 0.75rem;
            color: var(--text-primary);
            font-size: 0.95rem;
        }

        .pix-copy-container {
            display: flex;
            gap: 0.5rem;
            background: var(--bg-accent);
            padding: 1rem;
            border-radius: 12px;
            border: 2px dashed var(--border);
        }

        .pix-code-input {
            flex: 1;
            padding: 0.75rem;
            border: 1px solid var(--border);
            border-radius: 8px;
            font-family: monospace;
            font-size: 0.85rem;
            background: white;
            color: var(--text-primary);
        }

        .copy-button {
            padding: 0.75rem 1.5rem;
            background: var(--accent);
            color: white;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            white-space: nowrap;
            -webkit-tap-highlight-color: transparent;
            touch-action: manipulation;
            user-select: none;
        }

        .copy-button:hover {
            background: var(--accent-dark);
            transform: translateY(-2px);
        }

        .copy-button.copied {
            background: var(--green);
        }

        .pix-instructions {
            background: #e0f2fe;
            padding: 1.25rem;
            border-radius: 12px;
            margin-bottom: 1.5rem;
            text-align: left;
        }

        .pix-instructions h4 {
            color: var(--blue);
            margin-bottom: 0.75rem;
            font-size: 0.95rem;
        }

        .pix-instructions ol {
            padding-left: 1.25rem;
            color: var(--text-secondary);
            font-size: 0.85rem;
            line-height: 1.6;
        }

        .pix-instructions li {
            margin-bottom: 0.4rem;
        }

        .pix-modal-actions {
            display: flex;
            gap: 1rem;
        }

        .pix-modal-actions .btn {
            flex: 1;
        }

        .btn-close-pix {
            background: var(--bg-accent);
            color: var(--text-primary);
        }

        .btn-close-pix:hover {
            background: var(--border);
        }

        .pix-warning {
            background: #fff5ed;
            border-left: 4px solid var(--warning);
            padding: 1rem;
            border-radius: 8px;
            margin-top: 1.5rem;
            text-align: left;
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        .pix-warning strong {
            color: var(--warning);
            display: block;
            margin-bottom: 0.25rem;
        }

        /* Login/Register Modal */
        .auth-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(10px);
            z-index: 4000;
            align-items: center;
            justify-content: center;
            animation: fadeIn 0.3s ease-out;
        }

        .auth-modal.active {
            display: flex;
        }

        .auth-container {
            background: var(--bg-secondary);
            border-radius: 24px;
            padding: 3rem 2.5rem;
            max-width: 500px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
            animation: scaleIn 0.3s ease-out;
            position: relative;
        }

        .auth-header {
            text-align: center;
            margin-bottom: 2rem;
        }

        .auth-header h2 {
            font-size: 2rem;
            color: var(--text-primary);
            margin-bottom: 0.5rem;
        }

        .auth-header p {
            color: var(--text-secondary);
            font-size: 0.95rem;
        }

        .auth-tabs {
            display: flex;
            gap: 1rem;
            margin-bottom: 2rem;
            border-bottom: 2px solid var(--border);
        }

        .auth-tab {
            flex: 1;
            padding: 1rem;
            background: none;
            border: none;
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--text-secondary);
            cursor: pointer;
            transition: all 0.3s;
            border-bottom: 3px solid transparent;
            margin-bottom: -2px;
        }

        .auth-tab.active {
            color: var(--accent);
            border-bottom-color: var(--accent);
        }

        .auth-form {
            display: none;
        }

        .auth-form.active {
            display: block;
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-group label {
            display: block;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 0.5rem;
            font-size: 0.95rem;
        }

        .form-group input {
            width: 100%;
            padding: 1rem;
            border: 2px solid var(--border);
            border-radius: 12px;
            font-size: 1rem;
            font-family: 'Outfit', sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            transition: all 0.3s;
        }

        .form-group input:focus {
            outline: none;
            border-color: var(--accent);
            box-shadow: 0 0 0 3px rgba(255, 107, 53, 0.1);
        }

        .auth-submit {
            width: 100%;
            padding: 1rem;
            background: linear-gradient(135deg, var(--accent) 0%, var(--pink) 100%);
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 1.1rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s;
            margin-top: 1rem;
        }

        .auth-submit:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(255, 107, 53, 0.4);
        }

        /* Password Strength Indicator */
        .strength-bar {
            flex: 1;
            height: 4px;
            background: var(--border);
            border-radius: 2px;
            transition: all 0.3s;
        }

        .strength-bar.weak {
            background: #ef4444;
        }

        .strength-bar.medium {
            background: #f59e0b;
        }

        .strength-bar.good {
            background: #10b981;
        }

        .strength-bar.strong {
            background: #10b981;
        }

        /* Profile Section */
        .profile-section {
            display: none;
            padding: 3rem 0;
        }

        .profile-section.active {
            display: block;
        }

        .profile-container {
            max-width: 800px;
            margin: 0 auto;
            padding: 0 2rem;
        }

        .profile-header {
            background: linear-gradient(135deg, var(--accent) 0%, var(--pink) 100%);
            border-radius: 24px;
            padding: 3rem;
            text-align: center;
            margin-bottom: 3rem;
            color: white;
        }

        .profile-avatar {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            background: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 4rem;
            margin: 0 auto 1.5rem;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }

        .profile-name {
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
        }

        .profile-email {
            font-size: 1.1rem;
            opacity: 0.9;
        }

        .profile-card {
            background: var(--bg-secondary);
            border-radius: 20px;
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: 0 4px 12px var(--shadow);
        }

        .profile-card h3 {
            font-size: 1.5rem;
            color: var(--text-primary);
            margin-bottom: 1.5rem;
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .profile-info {
            display: grid;
            gap: 1.5rem;
        }

        .info-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding-bottom: 1rem;
            border-bottom: 1px solid var(--border);
        }

        .info-item:last-child {
            border-bottom: none;
            padding-bottom: 0;
        }

        .info-label {
            font-weight: 600;
            color: var(--text-secondary);
        }

        .info-value {
            font-weight: 600;
            color: var(--text-primary);
        }

        .logout-btn {
            width: 100%;
            padding: 1rem;
            background: #ef4444;
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }

        .logout-btn:hover {
            background: #dc2626;
            transform: translateY(-2px);
        }

        /* Home Section */
        .home-section {
            display: block;
        }

        .home-section.hidden {
            display: none;
        }

        /* Payment Wall/Lock System */
        .payment-wall {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.95);
            backdrop-filter: blur(10px);
            z-index: 3000;
            display: flex;
            align-items: center;
            justify-content: center;
            animation: fadeIn 0.5s ease-out;
        }

        .payment-wall.hidden {
            display: none;
        }

        .payment-wall-content {
            background: var(--bg-secondary);
            border-radius: 24px;
            padding: 2rem 1.5rem;
            max-width: 450px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
            text-align: center;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
            animation: scaleIn 0.5s ease-out;
        }

        .lock-icon {
            font-size: 3.5rem;
            margin-bottom: 1rem;
            animation: bounce 2s ease-in-out infinite;
        }

        .payment-wall-content h2 {
            font-family: 'DM Serif Display', serif;
            font-size: 1.5rem;
            margin-bottom: 0.5rem;
            color: var(--text-primary);
        }

        .payment-wall-content p {
            color: var(--text-secondary);
            margin-bottom: 1.5rem;
            font-size: 0.9rem;
        }

        .unlock-section {
            background: var(--bg-accent);
            padding: 1.5rem;
            border-radius: 16px;
            margin-bottom: 1.5rem;
        }

        .unlock-section h3 {
            font-size: 1.1rem;
            margin-bottom: 1rem;
            color: var(--text-primary);
        }

        .unlock-input {
            width: 100%;
            padding: 0.875rem;
            border: 2px solid var(--border);
            border-radius: 12px;
            font-size: 1rem;
            text-align: center;
            font-family: monospace;
            font-weight: 600;
            letter-spacing: 0.15em;
            margin-bottom: 0.875rem;
            text-transform: uppercase;
        }

        .unlock-input:focus {
            outline: none;
            border-color: var(--accent);
            box-shadow: 0 0 0 3px rgba(255, 107, 53, 0.1);
        }

        .unlock-button {
            width: 100%;
            padding: 0.875rem;
            background: linear-gradient(135deg, var(--accent) 0%, var(--pink) 100%);
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 1rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s;
            font-family: 'Outfit', sans-serif;
            -webkit-tap-highlight-color: transparent;
            touch-action: manipulation;
        }

        .unlock-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(255, 107, 53, 0.4);
        }

        .unlock-button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .error-message {
            color: var(--danger);
            font-size: 0.9rem;
            margin-top: 0.5rem;
            display: none;
        }

        .error-message.show {
            display: block;
            animation: shake 0.5s;
        }

        .payment-options {
            display: grid;
            gap: 1rem;
            margin-bottom: 1.5rem;
        }

        .payment-option-btn {
            width: 100%;
            padding: 1.25rem;
            background: white;
            border: 2px solid var(--border);
            border-radius: 16px;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 1rem;
            text-align: left;
            -webkit-tap-highlight-color: transparent;
            touch-action: manipulation;
        }

        .payment-option-btn:hover {
            border-color: var(--accent);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px var(--shadow);
        }

        .payment-option-icon {
            font-size: 3rem;
            flex-shrink: 0;
            width: 60px;
            height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: var(--bg-accent);
            border-radius: 12px;
        }

        .payment-option-info {
            flex: 1;
            min-width: 0;
        }

        .payment-option-info h4 {
            font-size: 1.1rem;
            margin-bottom: 0.25rem;
            color: var(--text-primary);
            font-weight: 700;
        }

        .payment-option-info p {
            font-size: 0.8rem;
            color: var(--text-secondary);
            margin: 0;
            line-height: 1.3;
        }

        .payment-option-price {
            font-size: 1.5rem;
            font-weight: 900;
            color: var(--accent);
            font-family: 'DM Serif Display', serif;
            text-align: right;
            line-height: 1;
        }

        .divider {
            display: flex;
            align-items: center;
            margin: 1.5rem 0;
            color: var(--text-tertiary);
            font-size: 0.85rem;
        }
            color: var(--accent);
            font-family: 'DM Serif Display', serif;
        }

        .divider {
            display: flex;
            align-items: center;
            margin: 2rem 0;
            color: var(--text-tertiary);
            font-size: 0.9rem;
        }

        .divider::before,
        .divider::after {
            content: '';
            flex: 1;
            height: 1px;
            background: var(--border);
        }

        .divider span {
            padding: 0 1rem;
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
        }

        @keyframes slideInRight {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        @keyframes slideOutRight {
            from {
                transform: translateX(0);
                opacity: 1;
            }
            to {
                transform: translateX(100%);
                opacity: 0;
            }
        }

        /* Blur effect for locked content */
        .content-locked {
            filter: blur(8px);
            pointer-events: none;
            user-select: none;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
        }

        .modal-header h3 {
            font-size: 1.5rem;
            font-weight: 600;
        }

        .close-btn {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--text-secondary);
            transition: color 0.2s;
            padding: 0.5rem;
            -webkit-tap-highlight-color: transparent;
            touch-action: manipulation;
            user-select: none;
            line-height: 1;
        }

        .close-btn:hover {
            color: var(--text-primary);
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
            font-size: 0.9rem;
            color: var(--text-primary);
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 0.875rem;
            border: 1px solid var(--border);
            border-radius: 12px;
            font-family: 'Outfit', sans-serif;
            font-size: 0.95rem;
            transition: all 0.2s;
            background: var(--bg-primary);
        }

        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: var(--accent);
            box-shadow: 0 0 0 3px rgba(45, 45, 45, 0.1);
        }

        .form-group textarea {
            resize: vertical;
            min-height: 100px;
        }

        .form-actions {
            display: flex;
            gap: 1rem;
            margin-top: 2rem;
        }

        .form-actions .btn {
            flex: 1;
        }

        /* Empty State */
        .empty-state {
            text-align: center;
            padding: 2rem;
            color: var(--text-secondary);
        }

        .empty-state-icon {
            font-size: 3rem;
            margin-bottom: 1rem;
            opacity: 0.5;
        }

        /* Animations */
        @keyframes fadeIn {
            from {
                opacity: 0;
            }
            to {
                opacity: 1;
            }
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes fadeInScale {
            from {
                opacity: 0;
                transform: scale(0.95);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        @keyframes slideIn {
            from {
                transform: scaleX(0);
            }
            to {
                transform: scaleX(1);
            }
        }

        @keyframes scaleIn {
            from {
                transform: scale(0.9);
                opacity: 0;
            }
            to {
                transform: scale(1);
                opacity: 1;
            }
        }

        @keyframes growUp {
            from {
                transform: scaleY(0);
            }
            to {
                transform: scaleY(1);
            }
        }

        @keyframes bounce {
            0%, 100% {
                transform: translateY(0);
            }
            50% {
                transform: translateY(-10px);
            }
        }

        @keyframes float {
            0%, 100% {
                transform: translateY(0);
            }
            50% {
                transform: translateY(-15px);
            }
        }

        @keyframes rotate {
            from {
                transform: rotate(0deg);
            }
            to {
                transform: rotate(360deg);
            }
        }

        @keyframes scrollDot {
            0% {
                opacity: 0;
                transform: translateX(-50%) translateY(0);
            }
            40% {
                opacity: 1;
            }
            80% {
                opacity: 0;
                transform: translateX(-50%) translateY(20px);
            }
            100% {
                opacity: 0;
            }
        }

        /* Responsive */
        
        /* Desktop - Pricing section optimization */
        @media (min-width: 1024px) {
            .pricing-section {
                padding: 5rem 0;
            }
            
            .pricing-card {
                max-width: 750px !important;
                margin: 0 auto !important;
                padding: 3.5rem !important;
            }
            
            .pricing-card .plan-price .price-value {
                font-size: 5.5rem !important;
            }
            
            .pricing-card .plan-features {
                display: grid;
                grid-template-columns: repeat(2, 1fr);
                gap: 1.5rem;
                text-align: left;
                margin: 2rem 0;
            }
            
            .pricing-card .plan-features li {
                font-size: 1.15rem;
            }
            
            .pricing-card .plan-cta {
                font-size: 1.5rem !important;
                padding: 1.5rem !important;
            }
        }
        
        @media (max-width: 1400px) {
            .dashboard-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 968px) {
            .video-hero {
                height: 60vh;
                min-height: 400px;
            }

            .video-content h1 {
                font-size: 2.5rem;
            }

            .video-content p {
                font-size: 1.2rem;
            }

            .pricing-header h2 {
                font-size: 2.5rem;
            }

            .pricing-grid {
                grid-template-columns: 1fr;
                max-width: 500px;
            }

            .photo-gallery-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 1.5rem;
            }

            .inspiration-photo:nth-child(4) {
                display: block;
            }

            .hero-content {
                grid-template-columns: 1fr;
                gap: 2rem;
            }

            .dashboard-grid {
                grid-template-columns: 1fr;
            }

            .nav-links {
                gap: 1rem;
            }

            .hero-text h1 {
                font-size: 2.5rem;
            }
        }

        @media (max-width: 640px) {
            .video-hero {
                height: 50vh;
                min-height: 350px;
            }

            .video-content h1 {
                font-size: 2rem;
                line-height: 1.2;
            }

            .video-content p {
                font-size: 1rem;
                padding: 0 1rem;
            }

            .cta-button {
                padding: 0.875rem 2rem;
                font-size: 1rem;
            }

            .pricing-header h2 {
                font-size: 2rem;
            }

            .pricing-header p {
                font-size: 1rem;
                padding: 0 1rem;
            }

            .price-value {
                font-size: 2.5rem;
            }

            .pricing-grid {
                gap: 1.5rem;
            }

            .pricing-card {
                padding: 2rem 1.5rem;
            }

            .carousel-item {
                width: 140px;
                height: 140px;
            }

            .pix-modal-content {
                padding: 1.5rem;
                max-height: 90vh;
                width: 95%;
                border-radius: 20px;
            }

            .pix-modal-header h3 {
                font-size: 1.5rem;
            }

            .amount {
                font-size: 2rem;
            }

            .qr-placeholder {
                width: 180px;
                height: 180px;
            }

            .qr-code-container img {
                width: 180px;
                height: 180px;
            }

            .pix-code-input {
                font-size: 0.75rem;
            }

            .pix-modal-actions {
                flex-direction: column;
                gap: 0.75rem;
            }

            .pix-modal-actions .btn {
                width: 100%;
                padding: 1rem;
                font-size: 1rem;
            }

            .photo-gallery-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 1rem;
            }

            nav {
                flex-direction: column;
                gap: 1rem;
                padding: 1rem;
            }

            .nav-links {
                flex-direction: row;
                justify-content: center;
                width: 100%;
            }

            .hero-text h1 {
                font-size: 2rem;
            }

            .hero-text p {
                font-size: 1rem;
            }

            .section-title h2 {
                font-size: 2rem;
            }

            .section-title p {
                font-size: 1rem;
                padding: 0 1rem;
            }

            .photo-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .dashboard-grid {
                gap: 1.5rem;
            }

            .card {
                padding: 1.5rem;
            }
        }
    </style>
</head>
<body>
    <header>
        <nav>
            <div class="logo" onclick="scrollToTop()" style="cursor: pointer;">PetCare</div>
            <ul class="nav-links">
                <li><a href="#home" class="nav-link active" onclick="showSection('home')">üè† In√≠cio</a></li>
                <li><a href="#profile" class="nav-link" onclick="showSection('profile')">üë§ Perfil</a></li>
            </ul>
        </nav>
    </header>

    <main id="mainContent">
        <!-- Home Section (All existing content) -->
        <div class="home-section" id="homeSection">
        <!-- Video Hero Section -->
        <section class="video-hero">
            <div class="video-background">
                <div class="floating-paws">
                    <div class="paw">üêæ</div>
                    <div class="paw">üêæ</div>
                    <div class="paw">üêæ</div>
                    <div class="paw">üêæ</div>
                    <div class="paw">üêæ</div>
                </div>
            </div>
            <div class="video-overlay"></div>
            <div class="video-content">
                <h1>Amor, Cuidado e Felicidade</h1>
                <p>Cada momento com seu pet √© precioso. Mantenha a sa√∫de e bem-estar dele em dia com carinho e organiza√ß√£o.</p>
                <button class="cta-button" onclick="document.querySelector('.hero').scrollIntoView({ behavior: 'smooth' })">
                    Come√ßar Agora ‚ú®
                </button>
            </div>
        </section>

        <section class="hero">
            <div class="container">
                <div class="hero-content">
                    <div class="hero-text">
                        <h1>Cuide do seu melhor amigo</h1>
                        <p>Acompanhe vacinas, consultas, alimenta√ß√£o e todos os momentos especiais do seu pet em um s√≥ lugar.</p>
                        <button class="btn" id="addPetBtn">Adicionar Meu Pet üêæ</button>
                    </div>
                    <div class="pet-profile-card">
                        <div class="pet-avatar">üêï</div>
                        <div class="pet-info">
                            <h2 id="petName">Seu Pet</h2>
                            <p id="petDetails">Clique em "Adicionar Pet" para come√ßar</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Inspirational Photos Section -->
        <section class="inspiration-section">
            <div class="container">
                <div class="section-title">
                    <h2>Momentos que Importam</h2>
                    <p>A conex√£o entre voc√™ e seu pet √© √∫nica e especial</p>
                </div>
                <div class="photo-gallery-grid">
                    <div class="inspiration-photo">
                        <img src="https://images.unsplash.com/photo-1548199973-03cce0bbc87b?w=600&q=80" alt="Mulher brincando com cachorro no parque" loading="lazy">
                        <div class="photo-caption">
                            <h3>Divers√£o ao Ar Livre</h3>
                            <p>Momentos de alegria e brincadeira</p>
                        </div>
                    </div>
                    <div class="inspiration-photo">
                        <img src="https://images.unsplash.com/photo-1581888227599-779811939961?w=600&q=80" alt="Pessoa abra√ßando cachorro feliz" loading="lazy">
                        <div class="photo-caption">
                            <h3>Amor Verdadeiro</h3>
                            <p>Conex√£o que aquece o cora√ß√£o</p>
                        </div>
                    </div>
                    <div class="inspiration-photo">
                        <img src="https://images.unsplash.com/photo-1601758228041-f3b2795255f1?w=600&q=80" alt="Homem e cachorro se divertindo" loading="lazy">
                        <div class="photo-caption">
                            <h3>Companheirismo</h3>
                            <p>Juntos em cada aventura</p>
                        </div>
                    </div>
                    <div class="inspiration-photo">
                        <img src="https://images.unsplash.com/photo-1450778869180-41d0601e046e?w=600&q=80" alt="Crian√ßa brincando com cachorro" loading="lazy">
                        <div class="photo-caption">
                            <h3>Crescendo Juntos</h3>
                            <p>Amizade que dura para sempre</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section class="dashboard">
            <div class="container">
                <div class="dashboard-grid">
                    <!-- Vacinas e Consultas -->
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">
                                <span class="card-icon">üíâ</span>
                                Vacinas & Consultas
                            </h3>
                            <button class="btn-secondary" id="addVaccineBtn">+ Adicionar</button>
                        </div>
                        <ul class="item-list" id="vaccineList">
                            <li class="empty-state">
                                <div class="empty-state-icon">üìã</div>
                                <p>Nenhum registro ainda</p>
                            </li>
                        </ul>
                    </div>

                    <!-- Medicamentos -->
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">
                                <span class="card-icon">üíä</span>
                                Medicamentos
                            </h3>
                            <button class="btn-secondary" id="addMedicineBtn">+ Adicionar</button>
                        </div>
                        <ul class="item-list" id="medicineList">
                            <li class="empty-state">
                                <div class="empty-state-icon">‚è∞</div>
                                <p>Nenhum lembrete configurado</p>
                            </li>
                        </ul>
                    </div>

                    <!-- Peso e Alimenta√ß√£o -->
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">
                                <span class="card-icon">‚öñÔ∏è</span>
                                Peso & Alimenta√ß√£o
                            </h3>
                            <button class="btn-secondary" id="addWeightBtn">+ Registrar</button>
                        </div>
                        <div class="weight-chart">
                            <p style="font-size: 0.9rem; color: var(--text-secondary); margin-bottom: 0.5rem;">√öltimos 6 meses</p>
                            <div class="chart-bars" id="weightChart">
                                <div class="bar" style="height: 60%;">
                                    <span class="bar-label">Set</span>
                                </div>
                                <div class="bar" style="height: 65%;">
                                    <span class="bar-label">Out</span>
                                </div>
                                <div class="bar" style="height: 70%;">
                                    <span class="bar-label">Nov</span>
                                </div>
                                <div class="bar" style="height: 75%;">
                                    <span class="bar-label">Dez</span>
                                </div>
                                <div class="bar" style="height: 80%;">
                                    <span class="bar-label">Jan</span>
                                </div>
                                <div class="bar" style="height: 85%;">
                                    <span class="bar-label">Fev</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Galeria de Fotos -->
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">
                                <span class="card-icon">üì∏</span>
                                Galeria
                            </h3>
                        </div>
                        <div class="photo-grid">
                            <div class="photo-placeholder photo-upload" id="uploadPhotoBtn">+</div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Pricing Section -->
        <section class="pricing-section" id="pricingSection">
            <div class="container pricing-content">
                <div class="pricing-header">
                    <h2>Desbloqueie Todos os Recursos</h2>
                    <p>Acesso completo e vital√≠cio por apenas</p>
                </div>
                <div class="pricing-grid">
                    <!-- Single Pricing Card -->
                    <div class="pricing-card" style="max-width: 500px; margin: 0 auto; border: 3px solid #10b981;">
                        <div class="popular-badge" style="background: #ef4444;">üî• OFERTA ESPECIAL</div>
                        <h3 class="plan-name">Acesso Vital√≠cio</h3>
                        <div class="plan-price">
                            <div class="price-value">
                                <span class="price-currency">R$</span>
                                <span style="text-decoration: line-through; opacity: 0.5; font-size: 0.6em; display: block; margin-bottom: 0.5rem;">45,90</span>
                                <span style="color: #10b981;">25,90</span>
                            </div>
                            <span class="price-period">pagamento √∫nico</span>
                        </div>
                        <div style="background: rgba(16, 185, 129, 0.1); padding: 1rem; border-radius: 12px; margin: 1.5rem 0;">
                            <p style="color: #10b981; font-weight: 700; font-size: 1.2rem; margin: 0;">
                                üí∞ Economize R$ 20,00
                            </p>
                            <p style="color: var(--text-secondary); font-size: 0.9rem; margin-top: 0.5rem;">
                                De R$ 45,90 por apenas R$ 25,90
                            </p>
                        </div>
                        <ul class="plan-features">
                            <li>‚úÖ Acesso completo e vital√≠cio</li>
                            <li>‚úÖ Registro ilimitado de vacinas</li>
                            <li>‚úÖ Controle de medicamentos</li>
                            <li>‚úÖ Acompanhamento de peso</li>
                            <li>‚úÖ Galeria de fotos ilimitada</li>
                            <li>‚úÖ Lembretes autom√°ticos</li>
                            <li>‚úÖ Sem mensalidades</li>
                            <li>‚úÖ Atualiza√ß√µes gratuitas para sempre</li>
                        </ul>
                        <button class="plan-cta" onclick="openPixPayment('unico', '25,90')" style="font-size: 1.3rem; padding: 1.25rem;">
                            üöÄ Garantir por R$ 25,90
                        </button>
                    </div>
                </div>
            </div>

            <!-- Animated Pet Carousel -->
            <div class="pet-carousel">
                <div class="carousel-track">
                    <div class="carousel-item">
                        <img src="https://images.unsplash.com/photo-1587300003388-59208cc962cb?w=300&q=80" alt="Cachorro feliz">
                    </div>
                    <div class="carousel-item">
                        <img src="https://images.unsplash.com/photo-1477884213360-7e9d7dcc1e48?w=300&q=80" alt="Gato fofo">
                    </div>
                    <div class="carousel-item">
                        <img src="https://images.unsplash.com/photo-1560807707-8cc77767d783?w=300&q=80" alt="Golden Retriever">
                    </div>
                    <div class="carousel-item">
                        <img src="https://images.unsplash.com/photo-1574158622682-e40e69881006?w=300&q=80" alt="Cachorro sorrindo">
                    </div>
                    <div class="carousel-item">
                        <img src="https://images.unsplash.com/photo-1583511655857-d19b40a7a54e?w=300&q=80" alt="Cachorro brincando">
                    </div>
                    <!-- Duplicate for seamless loop -->
                    <div class="carousel-item">
                        <img src="https://images.unsplash.com/photo-1587300003388-59208cc962cb?w=300&q=80" alt="Cachorro feliz">
                    </div>
                    <div class="carousel-item">
                        <img src="https://images.unsplash.com/photo-1477884213360-7e9d7dcc1e48?w=300&q=80" alt="Gato fofo">
                    </div>
                    <div class="carousel-item">
                        <img src="https://images.unsplash.com/photo-1560807707-8cc77767d783?w=300&q=80" alt="Golden Retriever">
                    </div>
                    <div class="carousel-item">
                        <img src="https://images.unsplash.com/photo-1574158622682-e40e69881006?w=300&q=80" alt="Cachorro sorrindo">
                    </div>
                    <div class="carousel-item">
                        <img src="https://images.unsplash.com/photo-1583511655857-d19b40a7a54e?w=300&q=80" alt="Cachorro brincando">
                    </div>
                </div>
            </div>
        </section>
        </div>
        <!-- End Home Section -->

        <!-- Profile Section -->
        <div class="profile-section" id="profileSection">
            <div class="profile-container">
                <div class="profile-header">
                    <div class="profile-avatar" id="profileAvatar" onclick="uploadProfilePhoto()" style="cursor: pointer; position: relative;" title="Clique para alterar foto">
                        üë§
                        <div style="position: absolute; bottom: 0; right: 0; background: var(--accent); border-radius: 50%; width: 35px; height: 35px; display: flex; align-items: center; justify-content: center; font-size: 1.2rem; border: 3px solid white;">
                            üì∏
                        </div>
                    </div>
                    <input type="file" id="profilePhotoInput" accept="image/*" style="display: none;">
                    <div class="profile-name" id="profileName">Visitante</div>
                    <div class="profile-email" id="profileEmail">Fa√ßa login para salvar seus dados</div>
                </div>

                <!-- Guest Mode - Login Prompt -->
                <div class="profile-card" id="guestPrompt">
                    <h3>üîê Entre ou Cadastre-se</h3>
                    <p style="color: var(--text-secondary); margin-bottom: 1.5rem; line-height: 1.6;">
                        Crie sua conta para salvar os dados do seu pet, receber lembretes e aproveitar todos os recursos do PetCare!
                    </p>
                    <div style="display: flex; gap: 1rem; flex-wrap: wrap;">
                        <button class="btn" onclick="openAuthModal('login')" style="flex: 1; min-width: 200px;">
                            üîë Fazer Login
                        </button>
                        <button class="btn" onclick="openAuthModal('register')" style="flex: 1; min-width: 200px; background: linear-gradient(135deg, var(--purple) 0%, var(--pink) 100%);">
                            ‚ú® Criar Conta Gr√°tis
                        </button>
                    </div>
                </div>

                <!-- Logged In Content - Hidden by default -->
                <div id="loggedInContent" style="display: none;">
                    <div class="profile-card">
                        <h3>üìã Informa√ß√µes Pessoais</h3>
                        <div class="profile-info">
                            <div class="info-item">
                                <span class="info-label">Nome Completo</span>
                                <span class="info-value" id="infoName">-</span>
                            </div>
                            <div class="info-item">
                                <span class="info-label">Email</span>
                                <span class="info-value" id="infoEmail">-</span>
                            </div>
                            <div class="info-item">
                                <span class="info-label">Telefone</span>
                                <span class="info-value" id="infoPhone">-</span>
                            </div>
                            <div class="info-item">
                                <span class="info-label">CPF</span>
                                <span class="info-value" id="infoCpf">-</span>
                            </div>
                        </div>
                    </div>

                    <div class="profile-card">
                        <h3>üí≥ Assinatura</h3>
                        <div class="profile-info">
                            <div class="info-item">
                                <span class="info-label">Plano Atual</span>
                                <span class="info-value" id="infoPlan">Gratuito</span>
                            </div>
                            <div class="info-item">
                                <span class="info-label">Status</span>
                                <span class="info-value" id="infoStatus">
                                    <span style="color: #10b981;">‚úì Ativo</span>
                                </span>
                            </div>
                            <div class="info-item">
                                <span class="info-label">C√≥digo de Acesso</span>
                                <span class="info-value" id="infoCode">-</span>
                            </div>
                        </div>
                    </div>

                    <div class="profile-card">
                        <h3>üêæ Meus Pets</h3>
                        <div class="profile-info" id="userPets">
                            <div class="info-item">
                                <span class="info-value" style="color: var(--text-secondary);">Nenhum pet cadastrado ainda</span>
                            </div>
                        </div>
                    </div>

                    <button class="logout-btn" onclick="logout()">
                        üö™ Sair da Conta
                    </button>
                </div>
            </div>
        </div>
        <!-- End Profile Section -->
    </main>

    <!-- Payment Wall Modal (Shows when trying to use premium features) -->
    <div class="payment-wall hidden" id="paymentWall">
        <div class="payment-wall-content">
            <div class="lock-icon">üîí</div>
            <h2>Desbloqueie o PetCare</h2>
            <p>Acesso completo e vital√≠cio por apenas R$ 25,90</p>

            <div class="payment-options">
                <button class="payment-option-btn" onclick="selectPlan('unico')" style="border: 3px solid #10b981;">
                    <div class="payment-option-icon" style="background: #10b981; color: white;">üî•</div>
                    <div class="payment-option-info">
                        <h4>Oferta Especial</h4>
                        <p>Acesso vital√≠cio ‚Ä¢ Sem mensalidades</p>
                    </div>
                    <div class="payment-option-price" style="color: #10b981;">
                        <span style="text-decoration: line-through; font-size: 0.6em; opacity: 0.5; display: block;">R$ 45,90</span>
                        R$<br>25,90
                    </div>
                </button>
            </div>

            <div class="divider">
                <span>J√° pagou?</span>
            </div>

            <div class="unlock-section">
                <h3>Digite seu c√≥digo de acesso</h3>
                <input 
                    type="text" 
                    class="unlock-input" 
                    id="unlockCode" 
                    placeholder="C√ìDIGO"
                    maxlength="12"
                >
                <button class="unlock-button" onclick="unlockApp()">
                    üîì Desbloquear Acesso
                </button>
                <div class="error-message" id="errorMessage">
                    ‚ùå C√≥digo inv√°lido. Tente novamente.
                </div>
            </div>

            <button class="btn btn-close-pix" onclick="closePaymentWall()" style="margin-top: 1.5rem; width: 100%;">
                Voltar
            </button>

            <p style="font-size: 0.85rem; color: var(--text-tertiary); margin-top: 1.5rem;">
                Ap√≥s o pagamento, voc√™ receber√° o c√≥digo de acesso por email
            </p>
        </div>
    </div>

    <!-- PIX Payment Modal -->
    <div class="pix-payment-modal" id="pixPaymentModal">
        <div class="pix-modal-content">
            <div class="pix-modal-header">
                <h3>Pagamento via PIX</h3>
                <button class="close-btn" onclick="closePixPayment()">&times;</button>
            </div>

            <div class="pix-plan-info">
                <div class="plan-selected" id="selectedPlanName">Plano Mensal</div>
                <div class="amount" id="pixAmount">R$ 34,90</div>
            </div>

            <div class="qr-code-container">
                <div class="qr-placeholder">
                    <div class="qr-placeholder-icon">üì±</div>
                    <div class="qr-placeholder-text">Escaneie o QR Code<br>com o app do seu banco</div>
                </div>
                <!-- Substitua a div acima por uma imagem real do QR Code quando dispon√≠vel -->
                <!-- <img src="seu-qr-code.png" alt="QR Code PIX"> -->
            </div>

            <div class="pix-copy-section">
                <div class="pix-copy-label">Ou use o PIX Copia e Cola:</div>
                <div class="pix-copy-container">
                    <input 
                        type="text" 
                        class="pix-code-input" 
                        id="pixCode" 
                        value="00020126580014br.gov.bcb.pix0136sua-chave-pix-aqui@example.com520400005303986540514.905802BR5925SEU NOME OU EMPRESA6009SAO PAULO62070503***63041234"
                        readonly
                    >
                    <button class="copy-button" onclick="copyPixCode()">
                        <span id="copyButtonText">Copiar</span>
                    </button>
                </div>
            </div>

            <div class="pix-instructions">
                <h4>üìã Como pagar:</h4>
                <ol>
                    <li>Abra o app do seu banco</li>
                    <li>Escolha a op√ß√£o PIX</li>
                    <li>Escaneie o QR Code ou cole o c√≥digo</li>
                    <li>Confirme o pagamento de <strong id="instructionAmount">R$ 34,90</strong></li>
                    <li>Pronto! Seu acesso ser√° liberado automaticamente</li>
                </ol>
            </div>

            <div class="pix-warning" id="pixWarning" style="display: none;">
                <strong>‚ö†Ô∏è Lembre-se:</strong>
                Este √© o plano mensal. Para continuar usando ap√≥s 30 dias, voc√™ precisar√° fazer um novo pagamento de R$ 34,90 via PIX.
            </div>

            <div class="pix-modal-actions">
                <button class="btn btn-close-pix" onclick="closePixPayment()">‚Üê Voltar aos Planos</button>
                <button class="btn" onclick="confirmPayment()">‚úì Confirmar Pagamento</button>
            </div>
        </div>
    </div>

    <!-- Modal - Adicionar Vacina/Consulta -->
    <div class="modal" id="vaccineModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Adicionar Vacina/Consulta</h3>
                <button class="close-btn" onclick="closeModal('vaccineModal')">&times;</button>
            </div>
            <form id="vaccineForm">
                <div class="form-group">
                    <label>Tipo</label>
                    <select id="vaccineType" required>
                        <option value="">Selecione...</option>
                        <option value="vaccine">Vacina</option>
                        <option value="checkup">Consulta</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Nome</label>
                    <input type="text" id="vaccineName" placeholder="Ex: V10, Consulta de rotina" required>
                </div>
                <div class="form-group">
                    <label>Data</label>
                    <input type="date" id="vaccineDate" required max="2099-12-31">
                </div>
                <div class="form-group">
                    <label>Observa√ß√µes</label>
                    <textarea id="vaccineNotes" placeholder="Informa√ß√µes adicionais..."></textarea>
                </div>
                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" onclick="closeModal('vaccineModal')">Cancelar</button>
                    <button type="submit" class="btn">Salvar</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal - Adicionar Medicamento -->
    <div class="modal" id="medicineModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Adicionar Medicamento</h3>
                <button class="close-btn" onclick="closeModal('medicineModal')">&times;</button>
            </div>
            <form id="medicineForm">
                <div class="form-group">
                    <label>Nome do Medicamento</label>
                    <input type="text" id="medicineName" placeholder="Ex: Verm√≠fugo" required>
                </div>
                <div class="form-group">
                    <label>Dosagem</label>
                    <input type="text" id="medicineDosage" placeholder="Ex: 1 comprimido" required>
                </div>
                <div class="form-group">
                    <label>Frequ√™ncia</label>
                    <select id="medicineFrequency" required>
                        <option value="">Selecione...</option>
                        <option value="daily">Di√°rio</option>
                        <option value="weekly">Semanal</option>
                        <option value="monthly">Mensal</option>
                        <option value="custom">Personalizado</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Pr√≥xima Dose</label>
                    <input type="datetime-local" id="medicineNextDose" required>
                </div>
                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" onclick="closeModal('medicineModal')">Cancelar</button>
                    <button type="submit" class="btn">Salvar</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal - Adicionar Peso -->
    <div class="modal" id="weightModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Registrar Peso</h3>
                <button class="close-btn" onclick="closeModal('weightModal')">&times;</button>
            </div>
            <form id="weightForm">
                <div class="form-group">
                    <label>Peso (kg)</label>
                    <input type="number" id="weightValue" step="0.1" placeholder="Ex: 12.5" required>
                </div>
                <div class="form-group">
                    <label>Data</label>
                    <input type="date" id="weightDate" required max="2099-12-31">
                </div>
                <div class="form-group">
                    <label>Alimenta√ß√£o Di√°ria</label>
                    <input type="text" id="foodAmount" placeholder="Ex: 200g de ra√ß√£o, 2x ao dia">
                </div>
                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" onclick="closeModal('weightModal')">Cancelar</button>
                    <button type="submit" class="btn">Salvar</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal - Adicionar Pet -->
    <div class="modal" id="petModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Adicionar Pet</h3>
                <button class="close-btn" onclick="closeModal('petModal')">&times;</button>
            </div>
            <form id="petForm">
                <div class="form-group">
                    <label class="photo-label">Escolha uma foto que represente seu pet</label>
                    <div class="pet-photo-selector">
                        <div class="pet-photo-option" data-photo="dog1">
                            <img src="https://images.unsplash.com/photo-1587300003388-59208cc962cb?w=300&q=80" alt="Cachorro feliz" loading="lazy">
                        </div>
                        <div class="pet-photo-option" data-photo="dog2">
                            <img src="https://images.unsplash.com/photo-1560807707-8cc77767d783?w=300&q=80" alt="Golden Retriever" loading="lazy">
                        </div>
                        <div class="pet-photo-option" data-photo="dog3">
                            <img src="https://images.unsplash.com/photo-1552053831-71594a27632d?w=300&q=80" alt="Cachorro sorrindo" loading="lazy">
                        </div>
                        <div class="pet-photo-option" data-photo="cat1">
                            <img src="https://images.unsplash.com/photo-1574158622682-e40e69881006?w=300&q=80" alt="Gato fofo" loading="lazy">
                        </div>
                        <div class="pet-photo-option" data-photo="cat2">
                            <img src="https://images.unsplash.com/photo-1615789591457-74a63395c990?w=300&q=80" alt="Gato branco" loading="lazy">
                        </div>
                        <div class="pet-photo-option" data-photo="cat3">
                            <img src="https://images.unsplash.com/photo-1606214174585-fe31582dc6ee?w=300&q=80" alt="Gato laranja" loading="lazy">
                        </div>
                        <div class="pet-photo-option" id="customPetPhoto" style="background: linear-gradient(135deg, var(--accent) 0%, var(--pink) 100%); cursor: pointer; display: flex; align-items: center; justify-content: center; font-size: 3rem; color: white;">
                            üì∏
                        </div>
                    </div>
                    <small style="color: var(--text-secondary); font-size: 0.85rem; margin-top: 0.5rem; display: block;">Clique em üì∏ para enviar sua pr√≥pria foto</small>
                    <input type="file" id="customPetPhotoInput" accept="image/*" style="display: none;">
                    <input type="hidden" id="petPhoto" name="petPhoto">
                </div>
                <div class="form-group">
                    <label>Nome</label>
                    <input type="text" id="petNameInput" placeholder="Ex: Rex" required>
                </div>
                <div class="form-group">
                    <label>Esp√©cie</label>
                    <select id="petSpecies" required>
                        <option value="">Selecione...</option>
                        <option value="dog">Cachorro üêï</option>
                        <option value="cat">Gato üê±</option>
                        <option value="bird">P√°ssaro üê¶</option>
                        <option value="other">Outro üêæ</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Ra√ßa</label>
                    <input type="text" id="petBreed" placeholder="Ex: Labrador">
                </div>
                <div class="form-group">
                    <label>Data de Nascimento</label>
                    <input type="date" id="petBirthdate" required max="2099-12-31">
                </div>
                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" onclick="closeModal('petModal')">Cancelar</button>
                    <button type="submit" class="btn">Salvar</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Login/Register Modal -->
    <div class="auth-modal" id="authModal">
        <div class="auth-container">
            <button class="close-btn" onclick="closeAuthModal()" style="position: absolute; top: 1.5rem; right: 1.5rem;">&times;</button>
            
            <div class="auth-header">
                <h2>Bem-vindo ao PetCare! üêæ</h2>
                <p>Fa√ßa login ou crie sua conta</p>
            </div>

            <div class="auth-tabs">
                <button class="auth-tab active" onclick="showAuthTab('login')">Entrar</button>
                <button class="auth-tab" onclick="showAuthTab('register')">Cadastrar</button>
            </div>

            <!-- Login Form -->
            <form class="auth-form active" id="loginForm" onsubmit="handleLogin(event)">
                <div class="form-group">
                    <label>Email</label>
                    <input type="email" id="loginEmail" required placeholder="seu@email.com">
                </div>
                <div class="form-group">
                    <label>Senha</label>
                    <div style="position: relative;">
                        <input type="password" id="loginPassword" required placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
                        <button type="button" onclick="togglePassword('loginPassword', this)" style="position: absolute; right: 10px; top: 50%; transform: translateY(-50%); background: none; border: none; cursor: pointer; font-size: 1.2rem;">üëÅÔ∏è</button>
                    </div>
                </div>
                <button type="submit" class="auth-submit">Entrar</button>
                <div style="margin: 1rem 0; text-align: center; color: var(--text-secondary);">
    ou
</div>

<button type="button" onclick="loginWithGoogle()" 
    style="width: 100%; padding: 0.9rem; border-radius: 12px; border: none; 
    font-weight: 600; cursor: pointer; background: white; color: #333; 
    display: flex; align-items: center; justify-content: center; gap: 10px;">
    
    <img src="https://www.svgrepo.com/show/475656/google-color.svg" width="20">
    Entrar com Google
</button>

            </form>

            <!-- Register Form -->
            <form class="auth-form" id="registerForm" onsubmit="handleRegister(event)">
                <div class="form-group">
                    <label>Nome Completo</label>
                    <input type="text" id="registerName" required placeholder="Seu nome completo">
                </div>
                <div class="form-group">
                    <label>Email</label>
                    <input type="email" id="registerEmail" required placeholder="seu@email.com">
                </div>
                <div class="form-group">
                    <label>Telefone</label>
                    <input type="tel" id="registerPhone" required placeholder="(00) 00000-0000" maxlength="15">
                    <small style="color: var(--text-secondary); font-size: 0.85rem;">Formato: (12) 34567-8900</small>
                </div>
                <div class="form-group">
                    <label>CPF</label>
                    <input type="text" id="registerCpf" required placeholder="000.000.000-00" maxlength="14">
                    <small style="color: var(--text-secondary); font-size: 0.85rem;">Apenas n√∫meros</small>
                    <div id="cpfError" style="color: #ef4444; font-size: 0.85rem; margin-top: 0.5rem; display: none;">
                        ‚ùå CPF inv√°lido
                    </div>
                </div>
                <div class="form-group">
                    <label>Senha</label>
                    <div style="position: relative;">
                        <input type="password" id="registerPassword" required placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" minlength="8">
                        <button type="button" onclick="togglePassword('registerPassword', this)" style="position: absolute; right: 10px; top: 15px; background: none; border: none; cursor: pointer; font-size: 1.2rem; z-index: 10;">üëÅÔ∏è</button>
                    </div>
                    <div id="passwordStrength" style="margin-top: 0.75rem;">
                        <div style="display: flex; gap: 0.5rem; margin-bottom: 0.5rem;">
                            <div class="strength-bar" id="strength1"></div>
                            <div class="strength-bar" id="strength2"></div>
                            <div class="strength-bar" id="strength3"></div>
                            <div class="strength-bar" id="strength4"></div>
                        </div>
                        <small id="strengthText" style="color: var(--text-secondary); font-size: 0.85rem;">
                            M√≠nimo 8 caracteres, letra mai√∫scula, min√∫scula e n√∫mero
                        </small>
                    </div>
                </div>
                <button type="submit" class="auth-submit">Criar Conta</button>
                <div style="margin: 1rem 0; text-align: center; color: var(--text-secondary);">
    ou
</div>

<button type="button" onclick="loginWithGoogle()" 
    style="width: 100%; padding: 0.9rem; border-radius: 12px; border: none; 
    font-weight: 600; cursor: pointer; background: white; color: #333; 
    display: flex; align-items: center; justify-content: center; gap: 10px;">
    
    <img src="https://www.svgrepo.com/show/475656/google-color.svg" width="20">
    Cadastrar com Google
</button>

            </form>
        </div>
    </div>

    <script>
        async function exigirLoginSupabase() {
  const { data, error } = await supabaseClient.auth.getUser();
  if (error) console.error(error);

  if (!data?.user) {
    openModal('authModal'); // abre o modal de login
    return false;
  }
  return true;
}
        // Data storage
        let petData = {
            name: '',
            species: '',
            breed: '',
            birthdate: '',
            photo: '',
            vaccines: [],
            medicines: [],
            weights: []
        };
        let petsList = [];        // lista de pets do usu√°rio logado
let currentPetId = null;  // pet atualmente aberto

        // Photo selection
        document.querySelectorAll('.pet-photo-option').forEach(option => {
            option.addEventListener('click', function() {
                // Check if it's the custom photo button
                if (this.id === 'customPetPhoto') {
                    document.getElementById('customPetPhotoInput').click();
                    return;
                }
                
                document.querySelectorAll('.pet-photo-option').forEach(opt => {
                    opt.classList.remove('selected');
                });
                this.classList.add('selected');
                document.getElementById('petPhoto').value = this.dataset.photo;
            });
        });

        // Custom pet photo upload
        document.getElementById('customPetPhotoInput').addEventListener('change', function(e) {
            const file = e.target.files[0];
            if (!file) return;
            
            if (file.size > 5 * 1024 * 1024) {
                alert('‚ùå A foto √© muito grande! M√°ximo 5MB.');
                return;
            }
            
            const reader = new FileReader();
            reader.onload = function(event) {
                const customPhoto = document.getElementById('customPetPhoto');
                customPhoto.style.backgroundImage = `url(${event.target.result})`;
                customPhoto.style.backgroundSize = 'cover';
                customPhoto.style.backgroundPosition = 'center';
                customPhoto.textContent = '';
                
                // Select it
                document.querySelectorAll('.pet-photo-option').forEach(opt => {
                    opt.classList.remove('selected');
                });
                customPhoto.classList.add('selected');
                
                // Save as base64
                document.getElementById('petPhoto').value = 'custom:' + event.target.result;
            };
            reader.readAsDataURL(file);
        });

        // ‚úÖ Load data from Supabase
async function loadData() {
  // supabaseClient ainda n√£o existe? (seguran√ßa)
  if (typeof supabaseClient === 'undefined') return;

  const user = await getUsuarioLogado();
  if (!user) {
    // deslogado -> estado vazio
    petsList = [];
    currentPetId = null;
    petData = { name:'', species:'', breed:'', birthdate:'', photo:'', vaccines:[], medicines:[], weights:[] };
    updatePetProfile();
    renderVaccines();
    renderMedicines();
    renderWeights();
    return;
  }

  // 1) lista de pets do usu√°rio
  const { data: pets, error: petsError } = await supabaseClient
    .from('pets')
    .select('id, name, species, breed, birthdate, photo_url, created_at')
    .eq('user_id', user.id)
    .order('created_at', { ascending: true });

  if (petsError) {
    console.error("Erro ao buscar pets:", petsError);
    alert("Erro ao carregar seus pets.");
    return;
  }

  petsList = pets || [];

  // sem pets ainda
  if (petsList.length === 0) {
    currentPetId = null;
    petData = { name:'', species:'', breed:'', birthdate:'', photo:'', vaccines:[], medicines:[], weights:[] };
    updatePetProfile();
    renderVaccines();
    renderMedicines();
    renderWeights();
    return;
  }

  // escolhe o pet atual (primeiro por enquanto)
  currentPetId = currentPetId || petsList[0].id;

  // 2) carrega tabelas filhas do pet atual
  const [vaccRes, medRes, weiRes] = await Promise.all([
    supabaseClient
      .from('vaccines')
      .select('id, name, applied_date, next_due_date, created_at')
      .eq('user_id', user.id)
      .eq('pet_id', currentPetId)
      .order('applied_date', { ascending: false }),

    supabaseClient
      .from('medicines')
      .select('*')
      .eq('user_id', user.id)
      .eq('pet_id', currentPetId)
      .order('created_at', { ascending: false }),

    supabaseClient
      .from('weights')
      .select('*')
      .eq('user_id', user.id)
      .eq('pet_id', currentPetId)
      .order('date', { ascending: false }),
  ]);

  if (vaccRes.error) console.error("Erro vaccines:", vaccRes.error);
  if (medRes.error) console.error("Erro medicines:", medRes.error);
  if (weiRes.error) console.error("Erro weights:", weiRes.error);

  const pet = petsList.find(p => p.id === currentPetId);

  // 3) monta petData no formato que seu JS j√° usa hoje
  petData = {
    name: pet?.name || '',
    species: pet?.species || '',
    breed: pet?.breed || '',
    birthdate: pet?.birthdate || '',
    photo: pet?.photo_url || '',
    vaccines: (vaccRes.data || []).map(v => ({
      id: v.id,
      type: 'vaccine',
      name: v.name,
      date: v.applied_date,
      next_due_date: v.next_due_date || null
    })),
    medicines: medRes.data || [],
    weights: weiRes.data || []
  };

  updatePetProfile();
  renderVaccines();
  renderMedicines();
  renderWeights();
}

// ‚úÖ Save pet (pets table) to Supabase
async function saveData() {
  const user = await getUsuarioLogado();
  if (!user) {
    alert("Voc√™ precisa estar logado para salvar.");
    return { ok: false };
  }

  const payload = {
    user_id: user.id,
    name: petData.name,
    species: petData.species || null,
    breed: petData.breed || null,
    birthdate: petData.birthdate || null,
    photo_url: petData.photo || null
  };

  // update pet existente
  if (currentPetId) {
    const { error } = await supabaseClient
      .from('pets')
      .update(payload)
      .eq('id', currentPetId)
      .eq('user_id', user.id);

    if (error) {
      console.error("Erro update pet:", error);
      alert("Erro ao salvar pet.");
      return { ok: false };
    }
    return { ok: true, petId: currentPetId };
  }

  // insert novo pet
  const { data, error } = await supabaseClient
    .from('pets')
    .insert(payload)
    .select('id')
    .single();

  if (error) {
    console.error("Erro insert pet:", error);
    alert("Erro ao criar pet.");
    return { ok: false };
  }

  currentPetId = data.id;
  return { ok: true, petId: currentPetId };
}

        // Modal functions
        function openModal(modalId) {
            document.getElementById(modalId).classList.add('active');
        }

        function closeModal(modalId) {
            document.getElementById(modalId).classList.remove('active');
        }

        // Update pet profile
        function updatePetProfile() {
            if (petData.name) {
                const speciesEmoji = {
                    'dog': 'üêï',
                    'cat': 'üê±',
                    'bird': 'üê¶',
                    'other': 'üêæ'
                };
                
                const photoUrls = {
                    'dog1': 'https://images.unsplash.com/photo-1587300003388-59208cc962cb?w=300&q=80',
                    'dog2': 'https://images.unsplash.com/photo-1560807707-8cc77767d783?w=300&q=80',
                    'dog3': 'https://images.unsplash.com/photo-1552053831-71594a27632d?w=300&q=80',
                    'cat1': 'https://images.unsplash.com/photo-1574158622682-e40e69881006?w=300&q=80',
                    'cat2': 'https://images.unsplash.com/photo-1615789591457-74a63395c990?w=300&q=80',
                    'cat3': 'https://images.unsplash.com/photo-1606214174585-fe31582dc6ee?w=300&q=80'
                };
                
                document.getElementById('petName').textContent = petData.name;
                
                const avatarEl = document.querySelector('.pet-avatar');
                
                // Check if it's a custom photo (starts with "custom:")
                if (petData.photo && petData.photo.startsWith('custom:')) {
                    const photoData = petData.photo.replace('custom:', '');
                    avatarEl.style.backgroundImage = `url(${photoData})`;
                    avatarEl.style.backgroundSize = 'cover';
                    avatarEl.style.backgroundPosition = 'center';
                    avatarEl.textContent = '';
                } else if (petData.photo && photoUrls[petData.photo]) {
                    avatarEl.style.backgroundImage = `url(${photoUrls[petData.photo]})`;
                    avatarEl.style.backgroundSize = 'cover';
                    avatarEl.style.backgroundPosition = 'center';
                    avatarEl.textContent = '';
                } else {
                    avatarEl.style.backgroundImage = 'none';
                    avatarEl.textContent = speciesEmoji[petData.species] || 'üêæ';
                }
                
                const birthDate = new Date(petData.birthdate);
                const age = Math.floor((new Date() - birthDate) / (365.25 * 24 * 60 * 60 * 1000));
                document.getElementById('petDetails').textContent = `${petData.breed || petData.species} ‚Ä¢ ${age} ${age === 1 ? 'ano' : 'anos'}`;
            }
        }

        // Render vaccines
        function renderVaccines() {
            const list = document.getElementById('vaccineList');
            
            if (petData.vaccines.length === 0) {
                list.innerHTML = `
                    <li class="empty-state">
                        <div class="empty-state-icon">üìã</div>
                        <p>Nenhum registro ainda</p>
                    </li>
                `;
                return;
            }

            list.innerHTML = petData.vaccines.map((v, index) => {
                const date = new Date(v.date);
                const today = new Date();
                const isPast = date < today;
                const status = isPast ? 'status-done' : 'status-upcoming';
                const statusText = isPast ? 'Realizado' : 'Agendado';

                return `
                    <li class="item">
                        <div class="item-info">
                            <h4>${v.name}</h4>
                            <p>${date.toLocaleDateString('pt-BR')} ‚Ä¢ ${v.type === 'vaccine' ? 'Vacina' : 'Consulta'}</p>
                        </div>
                        <span class="item-status ${status}">${statusText}</span>
                    </li>
                `;
            }).join('');
        }

        // Render medicines
        function renderMedicines() {
            const list = document.getElementById('medicineList');
            
            if (petData.medicines.length === 0) {
                list.innerHTML = `
                    <li class="empty-state">
                        <div class="empty-state-icon">‚è∞</div>
                        <p>Nenhum lembrete configurado</p>
                    </li>
                `;
                return;
            }

            list.innerHTML = petData.medicines.map(m => {
                const nextDose = new Date(m.nextDose);
                const today = new Date();
                const isOverdue = nextDose < today;
                const status = isOverdue ? 'status-overdue' : 'status-upcoming';
                const statusText = isOverdue ? 'Atrasado' : 'Pr√≥ximo';

                return `
                    <li class="item">
                        <div class="item-info">
                            <h4>${m.name}</h4>
                            <p>${m.dosage} ‚Ä¢ ${nextDose.toLocaleDateString('pt-BR')}</p>
                        </div>
                        <span class="item-status ${status}">${statusText}</span>
                    </li>
                `;
            }).join('');
        }

        // Render weights
        function renderWeights() {
            // This would update the chart with actual data
            // For now, keeping the demo chart
        }

        // Event Listeners
        document.getElementById('addPetBtn').addEventListener('click', () => {
            openModal('petModal');
        });

        document.getElementById('addVaccineBtn').addEventListener('click', () => {
            openModal('vaccineModal');
        });

        document.getElementById('addMedicineBtn').addEventListener('click', () => {
            openModal('medicineModal');
        });

        document.getElementById('addWeightBtn').addEventListener('click', () => {
            openModal('weightModal');
        });

        document.getElementById('petForm').addEventListener('submit', async (e) => {
  e.preventDefault();

  petData.name = document.getElementById('petNameInput').value;
  petData.species = document.getElementById('petSpecies').value;
  petData.breed = document.getElementById('petBreed').value;
  petData.birthdate = document.getElementById('petBirthdate').value;
  petData.photo = document.getElementById('petPhoto').value;

  const result = await saveData(); // ‚úÖ Supabase
  if (!result.ok) return;

  await loadData(); // ‚úÖ recarrega (multi-device)
  closeModal('petModal');

  e.target.reset();
  document.querySelectorAll('.pet-photo-option').forEach(opt => opt.classList.remove('selected'));
});

        document.getElementById('vaccineForm').addEventListener('submit', (e) => {
            e.preventDefault();
            
            petData.vaccines.push({
                type: document.getElementById('vaccineType').value,
                name: document.getElementById('vaccineName').value,
                date: document.getElementById('vaccineDate').value,
                notes: document.getElementById('vaccineNotes').value
            });
            
            saveData();
            renderVaccines();
            closeModal('vaccineModal');
            e.target.reset();
        });

        document.getElementById('medicineForm').addEventListener('submit', (e) => {
            e.preventDefault();
            
            petData.medicines.push({
                name: document.getElementById('medicineName').value,
                dosage: document.getElementById('medicineDosage').value,
                frequency: document.getElementById('medicineFrequency').value,
                nextDose: document.getElementById('medicineNextDose').value
            });
            
            saveData();
            renderMedicines();
            closeModal('medicineModal');
            e.target.reset();
        });

        document.getElementById('weightForm').addEventListener('submit', (e) => {
            e.preventDefault();
            
            petData.weights.push({
                value: parseFloat(document.getElementById('weightValue').value),
                date: document.getElementById('weightDate').value,
                food: document.getElementById('foodAmount').value
            });
            
            saveData();
            renderWeights();
            closeModal('weightModal');
            e.target.reset();
        });

        // Close modal on outside click
        document.querySelectorAll('.modal').forEach(modal => {
            modal.addEventListener('click', (e) => {
                if (e.target === modal) {
                    closeModal(modal.id);
                }
            });
        });

        // Profile photo upload
        function uploadProfilePhoto() {
            const user = JSON.parse(localStorage.getItem('petcare_user') || 'null');
            if (!user) {
                alert('‚ö†Ô∏è Voc√™ precisa estar logado para alterar sua foto!');
                return;
            }
            document.getElementById('profilePhotoInput').click();
        }

        document.getElementById('profilePhotoInput').addEventListener('change', function(e) {
            const file = e.target.files[0];
            if (!file) return;
            
            if (file.size > 5 * 1024 * 1024) {
                alert('‚ùå A foto √© muito grande! M√°ximo 5MB.');
                return;
            }
            
            const reader = new FileReader();
            reader.onload = function(event) {
                // Update user photo
                const user = JSON.parse(localStorage.getItem('petcare_user'));
                user.profilePhoto = event.target.result;
                
                // Update in users list
                const users = JSON.parse(localStorage.getItem('petcare_users') || '[]');
                const userIndex = users.findIndex(u => u.id === user.id);
                if (userIndex !== -1) {
                    users[userIndex].profilePhoto = event.target.result;
                    localStorage.setItem('petcare_users', JSON.stringify(users));
                }
                
                // Update current user
                localStorage.setItem('petcare_user', JSON.stringify(user));
                
                // Update avatar display
                const avatar = document.getElementById('profileAvatar');
                avatar.style.backgroundImage = `url(${event.target.result})`;
                avatar.style.backgroundSize = 'cover';
                avatar.style.backgroundPosition = 'center';
                avatar.innerHTML = '<div style="position: absolute; bottom: 0; right: 0; background: var(--accent); border-radius: 50%; width: 35px; height: 35px; display: flex; align-items: center; justify-content: center; font-size: 1.2rem; border: 3px solid white;">üì∏</div>';
                
                showToast('‚úÖ Foto atualizada com sucesso!');
            };
            reader.readAsDataURL(file);
        });

        // Toggle password visibility
        function togglePassword(inputId, button) {
            const input = document.getElementById(inputId);
            if (input.type === 'password') {
                input.type = 'text';
                button.textContent = 'üôà';
            } else {
                input.type = 'password';
                button.textContent = 'üëÅÔ∏è';
            }
        }

        // CPF Mask and Validation
        function maskCPF(value) {
            value = value.replace(/\D/g, ''); // Remove tudo que n√£o √© n√∫mero
            value = value.replace(/(\d{3})(\d)/, '$1.$2');
            value = value.replace(/(\d{3})(\d)/, '$1.$2');
            value = value.replace(/(\d{3})(\d{1,2})$/, '$1-$2');
            return value;
        }

        function validateCPF(cpf) {
            cpf = cpf.replace(/\D/g, '');
            
            if (cpf.length !== 11) return false;
            
            // Elimina CPFs invalidos conhecidos
            if (/^(\d)\1{10}$/.test(cpf)) return false;
            
            // Valida 1o digito
            let add = 0;
            for (let i = 0; i < 9; i++) {
                add += parseInt(cpf.charAt(i)) * (10 - i);
            }
            let rev = 11 - (add % 11);
            if (rev === 10 || rev === 11) rev = 0;
            if (rev !== parseInt(cpf.charAt(9))) return false;
            
            // Valida 2o digito
            add = 0;
            for (let i = 0; i < 10; i++) {
                add += parseInt(cpf.charAt(i)) * (11 - i);
            }
            rev = 11 - (add % 11);
            if (rev === 10 || rev === 11) rev = 0;
            if (rev !== parseInt(cpf.charAt(10))) return false;
            
            return true;
        }

        // Phone Mask
        function maskPhone(value) {
            value = value.replace(/\D/g, ''); // Remove tudo que n√£o √© n√∫mero
            value = value.replace(/^(\d{2})(\d)/g, '($1) $2');
            value = value.replace(/(\d)(\d{4})$/, '$1-$2');
            return value;
        }

        // Password Strength Checker
        function checkPasswordStrength(password) {
            let strength = 0;
            const bars = ['strength1', 'strength2', 'strength3', 'strength4'];
            const text = document.getElementById('strengthText');
            
            // Reset bars
            bars.forEach(id => {
                document.getElementById(id).className = 'strength-bar';
            });
            
            if (password.length >= 8) strength++;
            if (/[a-z]/.test(password)) strength++;
            if (/[A-Z]/.test(password)) strength++;
            if (/[0-9]/.test(password)) strength++;
            if (/[^a-zA-Z0-9]/.test(password)) strength++;
            
            // Update bars
            if (strength >= 1) {
                document.getElementById('strength1').classList.add('weak');
                text.textContent = 'Senha fraca';
                text.style.color = '#ef4444';
            }
            if (strength >= 2) {
                document.getElementById('strength2').classList.add('medium');
                text.textContent = 'Senha m√©dia';
                text.style.color = '#f59e0b';
            }
            if (strength >= 3) {
                document.getElementById('strength3').classList.add('good');
                text.textContent = 'Senha boa';
                text.style.color = '#10b981';
            }
            if (strength >= 4) {
                document.getElementById('strength4').classList.add('strong');
                text.textContent = 'Senha forte! ‚úì';
                text.style.color = '#10b981';
            }
            
            return strength >= 3; // Requer pelo menos "boa"
        }

        // Initialize masks and validation
        document.addEventListener('DOMContentLoaded', function() {
            // CPF mask
            const cpfInput = document.getElementById('registerCpf');
            if (cpfInput) {
                cpfInput.addEventListener('input', function(e) {
                    e.target.value = maskCPF(e.target.value);
                    
                    // Validate when complete
                    const cpf = e.target.value.replace(/\D/g, '');
                    const errorDiv = document.getElementById('cpfError');
                    if (cpf.length === 11) {
                        if (!validateCPF(cpf)) {
                            errorDiv.style.display = 'block';
                            e.target.style.borderColor = '#ef4444';
                        } else {
                            errorDiv.style.display = 'none';
                            e.target.style.borderColor = '#10b981';
                        }
                    } else {
                        errorDiv.style.display = 'none';
                        e.target.style.borderColor = '';
                    }
                });
            }
            
            // Phone mask
            const phoneInput = document.getElementById('registerPhone');
            if (phoneInput) {
                phoneInput.addEventListener('input', function(e) {
                    e.target.value = maskPhone(e.target.value);
                });
            }
            
            // Password strength
            const passwordInput = document.getElementById('registerPassword');
            if (passwordInput) {
                passwordInput.addEventListener('input', function(e) {
                    checkPasswordStrength(e.target.value);
                });
            }
        });

        // Initialize
// loadData(); // <- N√ÉO chama mais aqui (agora loadData depende do supabaseClient)
checkUserSession();
updatePricingVisibility();

        // Check if user is logged in (but don't force login)
        function checkUserSession() {
            const user = JSON.parse(localStorage.getItem('petcare_user') || 'null');
            
            if (user) {
                // User is logged in - check their premium status
                if (user.hasPremium) {
                    localStorage.setItem('petcare_paid', 'true');
                    localStorage.setItem('petcare_code', user.accessCode || '');
                } else {
                    // User doesn't have premium - clear flags
                    localStorage.removeItem('petcare_paid');
                    localStorage.removeItem('petcare_code');
                }
                
                loadUserProfile();
            } else {
                // User not logged in - clear premium flags and show guest mode
                localStorage.removeItem('petcare_paid');
                localStorage.removeItem('petcare_code');
                showGuestMode();
            }
        }

        function showGuestMode() {
            // Update profile to show login prompt
            const profileSection = document.getElementById('profileSection');
            if (profileSection) {
                document.getElementById('profileName').textContent = 'Visitante';
                document.getElementById('profileEmail').textContent = 'Fa√ßa login para salvar seus dados';
                document.getElementById('profileAvatar').textContent = 'üë§';
            }
        }

        async function handleLogin(e) {
  e.preventDefault();

  const email = document.getElementById('loginEmail').value.trim();
  const password = document.getElementById('loginPassword').value;

  const { data, error } = await supabaseClient.auth.signInWithPassword({
    email,
    password
  });

  if (error) {
    alert("Erro ao entrar: " + error.message);
    return;
  }

  // Opcional: guardar dados para UI (perfil), mas N√ÉO √© mais autentica√ß√£o
  const user = data.user;
  const userData = {
    email: user.email,
    name: user.user_metadata?.full_name || "",
    phone: user.user_metadata?.phone || "",
    cpf: user.user_metadata?.cpf || "",
    createdAt: new Date().toISOString()
  };
  localStorage.setItem('petcare_user', JSON.stringify(userData));

  // fecha modal e limpa
  closeModal('authModal');
  document.getElementById('loginForm').reset();

  // seu onAuthStateChange j√° chama loadData(); ent√£o aqui pode s√≥ atualizar perfil
  loadUserProfile();
}

        async function handleRegister(e) {
  e.preventDefault();

  const name = document.getElementById('registerName').value.trim();
  const email = document.getElementById('registerEmail').value.trim();
  const phone = document.getElementById('registerPhone').value.trim();
  const cpf = document.getElementById('registerCpf').value.trim();
  const password = document.getElementById('registerPassword').value;

  const { data, error } = await supabaseClient.auth.signUp({
    email,
    password,
    options: {
      data: { full_name: name, phone, cpf }
    }
  });

  if (error) {
    alert("Erro ao cadastrar: " + error.message);
    return;
  }

  alert("Conta criada! Se o Supabase exigir confirma√ß√£o, verifique seu email.");

  // Opcional: se veio session (quando confirma√ß√£o est√° desligada), j√° atualiza UI
  if (data?.session?.user) {
    const user = data.session.user;
    localStorage.setItem('petcare_user', JSON.stringify({
      email: user.email,
      name,
      phone,
      cpf,
      createdAt: new Date().toISOString()
    }));
    loadUserProfile();
  }

  closeModal('authModal');
  document.getElementById('registerForm').reset();
}

        function loadUserProfile() {
            const user = JSON.parse(localStorage.getItem('petcare_user'));
            if (!user) {
                // Show guest prompt
                document.getElementById('guestPrompt').style.display = 'block';
                document.getElementById('loggedInContent').style.display = 'none';
                document.getElementById('profileName').textContent = 'Visitante';
                document.getElementById('profileEmail').textContent = 'Fa√ßa login para salvar seus dados';
                document.getElementById('profileAvatar').textContent = 'üë§';
                return;
            }
            
            // Hide guest prompt, show logged in content
            document.getElementById('guestPrompt').style.display = 'none';
            document.getElementById('loggedInContent').style.display = 'block';
            
            // Update profile section
            document.getElementById('profileName').textContent = user.name;
            document.getElementById('profileEmail').textContent = user.email;
            
            // Update avatar with photo or initial
            const avatar = document.getElementById('profileAvatar');
            if (user.profilePhoto) {
                avatar.style.backgroundImage = `url(${user.profilePhoto})`;
                avatar.style.backgroundSize = 'cover';
                avatar.style.backgroundPosition = 'center';
                avatar.innerHTML = '<div style="position: absolute; bottom: 0; right: 0; background: var(--accent); border-radius: 50%; width: 35px; height: 35px; display: flex; align-items: center; justify-content: center; font-size: 1.2rem; border: 3px solid white;">üì∏</div>';
            } else {
                avatar.style.backgroundImage = 'none';
                avatar.innerHTML = user.name.charAt(0).toUpperCase() + '<div style="position: absolute; bottom: 0; right: 0; background: var(--accent); border-radius: 50%; width: 35px; height: 35px; display: flex; align-items: center; justify-content: center; font-size: 1.2rem; border: 3px solid white;">üì∏</div>';
            }
            
            document.getElementById('infoName').textContent = user.name;
            document.getElementById('infoEmail').textContent = user.email;
            document.getElementById('infoPhone').textContent = user.phone;
            document.getElementById('infoCpf').textContent = user.cpf;
            
            // Check if has premium access
            const isPaid = localStorage.getItem('petcare_paid') === 'true';
            const code = localStorage.getItem('petcare_code');
            
            if (isPaid && code) {
                document.getElementById('infoPlan').innerHTML = '<span style="color: #10b981;">Premium</span>';
                document.getElementById('infoCode').textContent = code;
            } else {
                document.getElementById('infoPlan').textContent = 'Gratuito';
                document.getElementById('infoCode').innerHTML = '<a href="#pricing" onclick="showSection(\'home\'); setTimeout(() => document.querySelector(\'.pricing-section\').scrollIntoView({behavior: \'smooth\'}), 100)" style="color: var(--accent); cursor: pointer;">Assinar agora</a>';
            }
            
            // Load user pets
            if (petData.name) {
                document.getElementById('userPets').innerHTML = `
                    <div class="info-item">
                        <span class="info-label">üêæ ${petData.name}</span>
                        <span class="info-value">${petData.species} ‚Ä¢ ${petData.breed || 'Sem ra√ßa definida'}</span>
                    </div>
                `;
            }
        }

        async function logout() {
    if (!confirm("Tem certeza que deseja sair da sua conta?")) return;

    const { error } = await supabaseClient.auth.signOut();

    if (error) {
        alert("Erro ao sair: " + error.message);
        return;
    }

    // Limpa seus dados locais
    localStorage.removeItem('petcare_user');
    localStorage.removeItem('petData');
    localStorage.removeItem('vaccines');
    localStorage.removeItem('medicines');
    localStorage.removeItem('weights');
    localStorage.removeItem('petcare_photos');

    // Redireciona
    window.location.href = "https://petcarenew.vercel.app";
}

        // Navigation
        function scrollToTop() {
            window.scrollTo({ top: 0, behavior: 'smooth' });
            // Also ensure home section is visible
            showSection('home');
        }

        function showSection(section) {
            // Update nav links
            document.querySelectorAll('.nav-link').forEach(link => {
                link.classList.remove('active');
            });
            event.target.closest('.nav-link')?.classList.add('active');
            
            // Show/hide sections
            if (section === 'home') {
                document.getElementById('homeSection').classList.remove('hidden');
                document.getElementById('profileSection').classList.remove('active');
            } else if (section === 'profile') {
                document.getElementById('homeSection').classList.add('hidden');
                document.getElementById('profileSection').classList.add('active');
                loadUserProfile();
            }
        }

        // Auth Modal
        function openAuthModal(tab = 'login') {
            document.getElementById('authModal').classList.add('active');
            
            // Set active tab
            document.querySelectorAll('.auth-tab').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.auth-form').forEach(f => f.classList.remove('active'));
            
            if (tab === 'login') {
                document.querySelector('.auth-tab:first-child').classList.add('active');
                document.getElementById('loginForm').classList.add('active');
            } else {
                document.querySelector('.auth-tab:last-child').classList.add('active');
                document.getElementById('registerForm').classList.add('active');
            }
        }

        function showAuthTab(tab) {
            // Update tabs
            document.querySelectorAll('.auth-tab').forEach(t => t.classList.remove('active'));
            event.target.classList.add('active');
            
            // Show forms
            document.querySelectorAll('.auth-form').forEach(f => f.classList.remove('active'));
            if (tab === 'login') {
                document.getElementById('loginForm').classList.add('active');
            } else {
                document.getElementById('registerForm').classList.add('active');
            }
        }

        function closeAuthModal() {
            document.getElementById('authModal').classList.remove('active');
        }

        // Check if user has premium access
        function hasPremiumAccess() {
            return localStorage.getItem('petcare_paid') === 'true';
        }

        // Hide pricing section if user has premium
        function updatePricingVisibility() {
            const pricingSection = document.getElementById('pricingSection');
            if (pricingSection && hasPremiumAccess()) {
                pricingSection.style.display = 'none';
            } else if (pricingSection) {
                pricingSection.style.display = 'block';
            }
        }

        // Show payment wall
        function showPaymentWall() {
            // Check if user is logged in
            const user = JSON.parse(localStorage.getItem('petcare_user') || 'null');
            
            if (!user) {
                // Not logged in - show auth modal first
                alert('‚ö†Ô∏è Voc√™ precisa criar uma conta para usar os recursos premium!\n\nCrie sua conta gratuitamente agora! üêæ');
                openAuthModal('register');
                return;
            }
            
            // User is logged in - show payment wall
            document.getElementById('paymentWall').classList.remove('hidden');
        }

        // Close payment wall
        function closePaymentWall() {
            document.getElementById('paymentWall').classList.add('hidden');
        }

        // Override addPetBtn to check login and payment first
        document.getElementById('addPetBtn').addEventListener('click', (e) => {
            e.preventDefault();
            e.stopPropagation();
            
            // Check if user is logged in first
            const user = JSON.parse(localStorage.getItem('petcare_user') || 'null');
            if (!user) {
                alert('‚ö†Ô∏è Voc√™ precisa criar uma conta para adicionar seu pet!\n\nCrie sua conta gratuitamente agora! üêæ');
                openAuthModal('register');
                return;
            }
            
            // Then check premium access
            if (hasPremiumAccess()) {
                openModal('petModal');
            } else {
                showPaymentWall();
            }
        });

        // Override other premium buttons
        document.getElementById('addVaccineBtn').addEventListener('click', (e) => {
            e.preventDefault();
            e.stopPropagation();
            
            // Check if user is logged in first
            const user = JSON.parse(localStorage.getItem('petcare_user') || 'null');
            if (!user) {
                alert('‚ö†Ô∏è Voc√™ precisa criar uma conta para usar este recurso!\n\nCrie sua conta gratuitamente agora! üêæ');
                openAuthModal('register');
                return;
            }
            
            if (hasPremiumAccess()) {
                openModal('vaccineModal');
            } else {
                showPaymentWall();
            }
        });

        document.getElementById('addMedicineBtn').addEventListener('click', (e) => {
            e.preventDefault();
            e.stopPropagation();
            
            // Check if user is logged in first
            const user = JSON.parse(localStorage.getItem('petcare_user') || 'null');
            if (!user) {
                alert('‚ö†Ô∏è Voc√™ precisa criar uma conta para usar este recurso!\n\nCrie sua conta gratuitamente agora! üêæ');
                openAuthModal('register');
                return;
            }
            
            if (hasPremiumAccess()) {
                openModal('medicineModal');
            } else {
                showPaymentWall();
            }
        });

        document.getElementById('addWeightBtn').addEventListener('click', (e) => {
            e.preventDefault();
            e.stopPropagation();
            
            // Check if user is logged in first
            const user = JSON.parse(localStorage.getItem('petcare_user') || 'null');
            if (!user) {
                alert('‚ö†Ô∏è Voc√™ precisa criar uma conta para usar este recurso!\n\nCrie sua conta gratuitamente agora! üêæ');
                openAuthModal('register');
                return;
            }
            
            if (hasPremiumAccess()) {
                openModal('weightModal');
            } else {
                showPaymentWall();
            }
        });

        // Photo Gallery System
        let photoGallery = JSON.parse(localStorage.getItem('petcare_photos') || '[]');

        document.getElementById('uploadPhotoBtn').addEventListener('click', (e) => {
            e.preventDefault();
            e.stopPropagation();
            
            if (hasPremiumAccess()) {
                // Create hidden file input
                const input = document.createElement('input');
                input.type = 'file';
                input.accept = 'image/*';
                input.multiple = true;
                
                input.onchange = (event) => {
                    const files = event.target.files;
                    if (files.length === 0) return;
                    
                    // Process each file
                    Array.from(files).forEach(file => {
                        // Check file size (max 5MB)
                        if (file.size > 5 * 1024 * 1024) {
                            alert(`‚ùå A foto ${file.name} √© muito grande! M√°ximo 5MB.`);
                            return;
                        }
                        
                        // Read file as base64
                        const reader = new FileReader();
                        reader.onload = (e) => {
                            const photo = {
                                id: Date.now() + Math.random(),
                                data: e.target.result,
                                name: file.name,
                                date: new Date().toISOString()
                            };
                            
                            // Add to gallery
                            photoGallery.push(photo);
                            localStorage.setItem('petcare_photos', JSON.stringify(photoGallery));
                            
                            // Update display
                            displayPhotos();
                            
                            // Show success message
                            showToast('‚úÖ Foto adicionada com sucesso!');
                        };
                        reader.readAsDataURL(file);
                    });
                };
                
                input.click();
            } else {
                showPaymentWall();
            }
        });

        function displayPhotos() {
            const container = document.querySelector('.photo-gallery-grid');
            
            // Clear existing photos (except upload button)
            const existingPhotos = container.querySelectorAll('.photo-item');
            existingPhotos.forEach(photo => photo.remove());
            
            // Add photos from gallery
            photoGallery.forEach(photo => {
                const photoEl = document.createElement('div');
                photoEl.className = 'photo-placeholder photo-item';
                photoEl.style.backgroundImage = `url(${photo.data})`;
                photoEl.style.backgroundSize = 'cover';
                photoEl.style.backgroundPosition = 'center';
                photoEl.style.cursor = 'pointer';
                
                // Click to view full size
                photoEl.onclick = () => viewPhoto(photo);
                
                // Insert before upload button
                const uploadBtn = document.getElementById('uploadPhotoBtn');
                container.insertBefore(photoEl, uploadBtn);
            });
            
            // Update counter
            updatePhotoCounter();
        }

        function updatePhotoCounter() {
            const counter = document.querySelector('.card-header .badge');
            if (counter) {
                counter.textContent = photoGallery.length;
            }
        }

        function viewPhoto(photo) {
            // Create modal to view photo
            const modal = document.createElement('div');
            modal.className = 'modal active';
            modal.style.zIndex = '5000';
            modal.innerHTML = `
                <div class="modal-content" style="max-width: 800px; padding: 0; background: transparent;">
                    <div style="position: relative;">
                        <img src="${photo.data}" style="width: 100%; border-radius: 20px; box-shadow: 0 20px 60px rgba(0,0,0,0.5);">
                        <button onclick="this.closest('.modal').remove()" style="position: absolute; top: 1rem; right: 1rem; width: 40px; height: 40px; border-radius: 50%; background: rgba(0,0,0,0.7); color: white; border: none; font-size: 1.5rem; cursor: pointer;">&times;</button>
                        <button onclick="deletePhoto('${photo.id}')" style="position: absolute; bottom: 1rem; right: 1rem; padding: 0.75rem 1.5rem; background: #ef4444; color: white; border: none; border-radius: 12px; font-weight: 600; cursor: pointer;">üóëÔ∏è Excluir</button>
                    </div>
                </div>
            `;
            
            modal.onclick = (e) => {
                if (e.target === modal) modal.remove();
            };
            
            document.body.appendChild(modal);
        }

        function deletePhoto(photoId) {
            if (confirm('Tem certeza que deseja excluir esta foto?')) {
                photoGallery = photoGallery.filter(p => p.id != photoId);
                localStorage.setItem('petcare_photos', JSON.stringify(photoGallery));
                displayPhotos();
                
                // Close modal
                const modal = document.querySelector('.modal');
                if (modal) modal.remove();
                
                showToast('üóëÔ∏è Foto exclu√≠da!');
            }
        }

        function showToast(message) {
            const toast = document.createElement('div');
            toast.style.cssText = `
                position: fixed;
                bottom: 2rem;
                right: 2rem;
                background: linear-gradient(135deg, var(--accent) 0%, var(--pink) 100%);
                color: white;
                padding: 1rem 1.5rem;
                border-radius: 12px;
                font-weight: 600;
                box-shadow: 0 10px 30px rgba(0,0,0,0.3);
                z-index: 6000;
                animation: slideInRight 0.3s ease-out;
            `;
            toast.textContent = message;
            document.body.appendChild(toast);
            
            setTimeout(() => {
                toast.style.animation = 'slideOutRight 0.3s ease-out';
                setTimeout(() => toast.remove(), 300);
            }, 3000);
        }

        // Load photos on init
        displayPhotos();

        function selectPlan(planType) {
            // Close payment wall
            closePaymentWall();
            
            // Open PIX payment modal with special price
            const amount = '25,90';
            openPixPayment('unico', amount);
        }

        function unlockApp() {
            const codeInput = document.getElementById('unlockCode');
            const errorMessage = document.getElementById('errorMessage');
            const code = codeInput.value.toUpperCase().trim();

            // Check if user is logged in
            const user = JSON.parse(localStorage.getItem('petcare_user') || 'null');
            if (!user) {
                alert('‚ö†Ô∏è Voc√™ precisa estar logado para usar um c√≥digo de acesso!');
                return;
            }

            // Valid codes list (you manage these codes)
            const validCodes = [
                'TESTE-2024',      // Test code
                'PETCARE-DEMO',    // Demo code
                'MENSAL-ABC123',   // Monthly code example
                'UNICO-XYZ789',    // Unique code example
            ];

            if (validCodes.includes(code)) {
                // Valid code - unlock app FOR THIS USER
                user.hasPremium = true;
                user.accessCode = code;
                user.unlockDate = new Date().toISOString();
                
                // Update user in users list
                const users = JSON.parse(localStorage.getItem('petcare_users') || '[]');
                const userIndex = users.findIndex(u => u.id === user.id);
                if (userIndex !== -1) {
                    users[userIndex] = user;
                    localStorage.setItem('petcare_users', JSON.stringify(users));
                }
                
                // Update current user
                localStorage.setItem('petcare_user', JSON.stringify(user));
                
                // Also set paid flag for backward compatibility
                localStorage.setItem('petcare_paid', 'true');
                localStorage.setItem('petcare_code', code);
                
                // Close payment wall
                closePaymentWall();

                // Success message
                alert('‚úÖ Acesso Premium liberado com sucesso!\n\nBem-vindo ao PetCare! üêæ\n\nAgora voc√™ pode adicionar seu pet e usar todas as funcionalidades.');
                
                // Update pricing visibility
                updatePricingVisibility();
                
                // Update profile
                loadUserProfile();
                
                // Clear input
                codeInput.value = '';
                errorMessage.classList.remove('show');
            } else {
                // Invalid code
                errorMessage.classList.add('show');
                codeInput.value = '';
                codeInput.focus();
                
                setTimeout(() => {
                    errorMessage.classList.remove('show');
                }, 3000);
            }
        }

        // Allow unlock on Enter key
        document.getElementById('unlockCode')?.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                unlockApp();
            }
        });

        // Close payment wall on outside click
        document.getElementById('paymentWall')?.addEventListener('click', (e) => {
            if (e.target.id === 'paymentWall') {
                closePaymentWall();
            }
        });

        // PIX Payment Functions
        function openPixPayment(planType, amount) {
            const modal = document.getElementById('pixPaymentModal');
            const planName = 'Acesso Vital√≠cio - Oferta Especial';
            const warning = document.getElementById('pixWarning');
            
            document.getElementById('selectedPlanName').textContent = planName;
            document.getElementById('pixAmount').textContent = 'R$ ' + amount;
            document.getElementById('instructionAmount').textContent = 'R$ ' + amount;
            
            // Hide warning (no monthly renewal)
            warning.style.display = 'none';
            
            modal.classList.add('active');
        }

        function closePixPayment() {
            document.getElementById('pixPaymentModal').classList.remove('active');
            // Reset copy button
            const copyBtn = document.getElementById('copyButtonText');
            copyBtn.textContent = 'Copiar';
            copyBtn.parentElement.classList.remove('copied');
            
            // Optional: scroll back to pricing section
            // document.querySelector('.pricing-section').scrollIntoView({ behavior: 'smooth' });
        }

        function copyPixCode() {
            const pixCode = document.getElementById('pixCode');
            const copyBtn = document.getElementById('copyButtonText');
            const copyButton = copyBtn.parentElement;
            
            // Copy to clipboard
            pixCode.select();
            pixCode.setSelectionRange(0, 99999); // For mobile
            navigator.clipboard.writeText(pixCode.value);
            
            // Visual feedback
            copyBtn.textContent = '‚úì Copiado!';
            copyButton.classList.add('copied');
            
            // Reset after 3 seconds
            setTimeout(() => {
                copyBtn.textContent = 'Copiar';
                copyButton.classList.remove('copied');
            }, 3000);
        }

        function confirmPayment() {
            // Check if user is logged in
            const user = JSON.parse(localStorage.getItem('petcare_user') || 'null');
            if (!user) {
                alert('‚ö†Ô∏è Voc√™ precisa estar logado para confirmar o pagamento!');
                return;
            }
            
            const confirmed = confirm('Voc√™ confirmou que realizou o pagamento via PIX?\n\n‚úÖ Ap√≥s a confirma√ß√£o, o c√≥digo de acesso ser√° enviado para seu email cadastrado:\n\n' + user.email);
            
            if (confirmed) {
                // Generate access code (in production, this comes from server)
                const accessCode = generateAccessCode();
                
                // Add to valid codes list (in production, server does this)
                // Note: In production, this would be done server-side after payment confirmation
                
                // Show success message WITHOUT showing the code
                alert(`‚úÖ Pagamento Confirmado!\n\nüìß Seu c√≥digo de acesso foi enviado para:\n${user.email}\n\nVerifique sua caixa de entrada (e spam) e use o c√≥digo para desbloquear o app!`);
                
                // In production: Here you would call an API to:
                // 1. Verify payment
                // 2. Generate code
                // 3. Send email with code
                // 4. Store code in database linked to user
                
                // For now, we'll store it locally as a demo
                // REMOVE these lines in production:
                localStorage.setItem('petcare_paid', 'true');
                localStorage.setItem('petcare_code', accessCode);
                // Instead, the code should only be validated when entered by user
                
                closePixPayment();
                updatePricingVisibility();
                
                showToast('üìß C√≥digo enviado para seu email!');
            }
        }

        // Gera c√≥digo de acesso aleat√≥rio
        function generateAccessCode() {
            const prefix = 'PETCARE';
            const random = Math.random().toString(36).substring(2, 8).toUpperCase();
            return `${prefix}-${random}`;
        }

        // Close PIX modal on outside click
        document.getElementById('pixPaymentModal').addEventListener('click', (e) => {
            if (e.target.id === 'pixPaymentModal') {
                closePixPayment();
            }
        });

        // Close PIX modal on ESC key
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') {
                const pixModal = document.getElementById('pixPaymentModal');
                if (pixModal.classList.contains('active')) {
                    closePixPayment();
                }
            }
        });
    </script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

<script>
    const supabaseClient = window.supabase.createClient(
        
        "https://chblwbctbkqolymbrqvh.supabase.co",
        "sb_publishable_WT_rpILQTaihVpghi1MQ5A_C62NVvTL"
    );

    async function getUsuarioLogado() {
  const { data, error } = await supabaseClient.auth.getUser();
  if (error) {
    console.error("getUser erro:", error);
    return null;
  }
  return data?.user ?? null;
}

supabaseClient.auth.onAuthStateChange(async (_event, session) => {
  if (session?.user) {
    await loadData(); // ‚úÖ agora carrega do Supabase ap√≥s login
  } else {
    // deslogou
    petsList = [];
    currentPetId = null;
    petData = { name:'', species:'', breed:'', birthdate:'', photo:'', vaccines:[], medicines:[], weights:[] };
    updatePetProfile();
    renderVaccines();
    renderMedicines();
    renderWeights();
  }
});

    async function loginWithGoogle() {
        const { error } = await supabaseClient.auth.signInWithOAuth({
            provider: "google",
            options: {
                redirectTo: "https://petcarenew.vercel.app"
            }
        });

        if (error) {
            alert("Erro: " + error.message);
        }
    }

    async function checkSupabaseUser() {
        const { data } = await supabaseClient.auth.getUser()
;

        if (data.user) {
            const userData = {
                id: data.user.id,
                name: data.user.user_metadata.full_name || data.user.email,
                email: data.user.email,
                phone: '',
                cpf: '',
                createdAt: new Date().toISOString(),
                plan: 'Gratuito',
                code: null,
                profilePhoto: data.user.user_metadata.avatar_url || null
            };

            localStorage.setItem('petcare_user', JSON.stringify(userData));
loadUserProfile();
await loadData();
        }
    }

    checkSupabaseUser();
    async function usuarioEstaLogado() {
    const { data } = await supabaseClient.auth.getUser();
    return data.user !== null;
}
async function showTab(tabName) {

    // üîê Prote√ß√£o para abas que precisam de login
    if (tabName === "perfil") {
        const { data } = await supabaseClient.auth.getUser();

        if (!data.user) {
            alert("Voc√™ precisa estar logado para acessar essa √°rea.");
            tabName = "login";
        }
    }

    document.querySelectorAll('.tab-content').forEach(tab => {
        tab.classList.remove('active');
    });

    document.getElementById(tabName).classList.add('active');
}
</script>

</body>
</html>
